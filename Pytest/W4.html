<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Python Files, JSON, Modules &amp; Copilot | Cybersecurity Edition</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
            color: #e0e0e0;
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            padding: 40px 20px;
            background: linear-gradient(135deg, #1a0000 0%, #330000 100%);
            border: 2px solid #cc0000;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 0 20px rgba(204, 0, 0, 0.3);
        }

        h1 {
            color: #cc0000;
            font-size: 2.5em;
            text-shadow: 0 0 10px rgba(204, 0, 0, 0.5);
            margin-bottom: 10px;
        }

        .subtitle {
            color: #999;
            font-size: 1.2em;
        }

        .progress-container {
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 20px;
            padding: 10px;
            margin: 20px 0;
        }

        .progress-bar {
            height: 30px;
            background: linear-gradient(90deg, #cc0000 0%, #ff0000 100%);
            border-radius: 15px;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .section {
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }

        .section.completed {
            border-color: #cc0000;
            box-shadow: 0 0 15px rgba(204, 0, 0, 0.2);
        }

        h2 {
            color: #cc0000;
            font-size: 1.8em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #333;
        }

        h3 {
            color: #ff4444;
            font-size: 1.3em;
            margin: 20px 0 10px 0;
        }

        .code-block {
            background: #0a0a0a;
            border: 1px solid #444;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
            overflow-x: auto;
            position: relative;
        }

        .code-block code {
            color: #00ff00;
            font-family: 'Courier New', monospace;
            font-size: 0.95em;
        }

        .editable-code {
            background: #0a0a0a;
            border: 2px solid #cc0000;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
            color: #00ff00;
            font-family: 'Courier New', monospace;
            width: 100%;
            min-height: 150px;
            resize: vertical;
        }

        .terminal {
            background: #000;
            border: 2px solid #cc0000;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
            min-height: 150px;
            color: #00ff00;
            font-family: 'Courier New', monospace;
            overflow-y: auto;
            max-height: 400px;
        }

        .terminal-prompt {
            color: #cc0000;
        }

        .terminal-output {
            color: #00ff00;
            white-space: pre-wrap;
        }

        .terminal-error {
            color: #ff4444;
        }

        button {
            background: linear-gradient(135deg, #cc0000 0%, #990000 100%);
            color: white;
            border: 1px solid #ff0000;
            padding: 12px 25px;
            border-radius: 5px;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            font-size: 1em;
            transition: all 0.3s ease;
            margin: 5px;
        }

        button:hover {
            background: linear-gradient(135deg, #ff0000 0%, #cc0000 100%);
            box-shadow: 0 0 15px rgba(204, 0, 0, 0.5);
            transform: translateY(-2px);
        }

        button:disabled {
            background: #333;
            border-color: #555;
            cursor: not-allowed;
            opacity: 0.5;
        }

        .info-box {
            background: #1a0000;
            border-left: 4px solid #cc0000;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .warning-box {
            background: #1a1a00;
            border-left: 4px solid #ffaa00;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
            color: #ffcc66;
        }

        .success-box {
            background: #001a00;
            border-left: 4px solid #00cc00;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
            color: #66ff66;
        }

        .quiz-option {
            background: #1a1a1a;
            border: 2px solid #333;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quiz-option:hover {
            border-color: #cc0000;
            background: #220000;
        }

        .quiz-option.correct {
            border-color: #00cc00;
            background: #001a00;
        }

        .quiz-option.incorrect {
            border-color: #cc0000;
            background: #1a0000;
        }

        .badge {
            display: inline-block;
            background: #cc0000;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            margin: 5px;
            box-shadow: 0 0 10px rgba(204, 0, 0, 0.3);
        }

        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .file-tree {
            font-family: 'Courier New', monospace;
            background: #0a0a0a;
            border: 1px solid #444;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }

        .file-tree .folder {
            color: #ffaa00;
            margin: 5px 0;
        }

        .file-tree .file {
            color: #00ff00;
            margin: 5px 0 5px 20px;
        }

        .git-visual {
            background: #0a0a0a;
            border: 2px solid #cc0000;
            border-radius: 5px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }

        .git-node {
            display: inline-block;
            background: #cc0000;
            color: white;
            padding: 10px 20px;
            border-radius: 50%;
            margin: 10px;
            font-size: 0.9em;
            box-shadow: 0 0 10px rgba(204, 0, 0, 0.5);
        }

        .git-arrow {
            color: #666;
            font-size: 2em;
        }

        .copilot-suggestion {
            background: #0a0a0a;
            border: 2px solid #666;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
            position: relative;
        }

        .copilot-label {
            position: absolute;
            top: -12px;
            left: 10px;
            background: #666;
            color: white;
            padding: 2px 10px;
            border-radius: 3px;
            font-size: 0.8em;
        }

        .json-viewer {
            background: #0a0a0a;
            border: 1px solid #444;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            overflow-x: auto;
        }

        .json-key {
            color: #cc0000;
        }

        .json-string {
            color: #00cc00;
        }

        .json-number {
            color: #00aaff;
        }

        .json-boolean {
            color: #ffaa00;
        }

        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .grid-2 {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 1.8em;
            }
        }

        .hidden {
            display: none;
        }

        input[type="text"], textarea {
            background: #0a0a0a;
            border: 1px solid #444;
            color: #00ff00;
            padding: 10px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            width: 100%;
            margin: 10px 0;
        }

        .check-answer {
            margin-top: 10px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        th, td {
            border: 1px solid #333;
            padding: 12px;
            text-align: left;
        }

        th {
            background: #1a0000;
            color: #cc0000;
        }

        tr:nth-child(even) {
            background: #0f0f0f;
        }
    </style>
</head><body><div class="container"><header>
<h1>‚ö° Python Files, JSON, Modules &amp; Copilot ‚ö°</h1>
<p class="subtitle">Cybersecurity Programming Fundamentals</p>
<div class="badge">Module 4</div>
<div class="badge">Interactive Learning</div>
</header>
<div class="progress-container">
<div class="progress-bar" id="progressBar" style="width: 0%;">0% Complete</div>
</div>
<div style="text-align: center; margin: 10px 0;"><button style="background: #333; border-color: #666; padding: 8px 15px; font-size: 0.9em;" onclick="resetProgress()">üîÑ Reset Progress</button></div>
<!-- Section 1: Introduction -->
<div class="section" id="section-intro">
<h2>üéØ Learning Objectives</h2>
<p>Welcome to Module 4! By the end of this interactive session, you'll be able to:</p>
<ul style="margin: 20px 0 20px 30px;">
<li>Safely read and write files using Python's context managers</li>
<li>Understand and navigate file paths (relative vs absolute)</li>
<li>Parse and manipulate JSON data for cybersecurity applications</li>
<li>Structure code across multiple modules for better organization</li>
<li>Use Git/GitHub for version control</li>
<li>Leverage AI coding assistants like GitHub Copilot effectively and safely</li>
</ul>
<div class="info-box"><strong>üí° Why This Matters in Cybersecurity:</strong>
<p>Modern security tools generate massive amounts of data in logs, JSON APIs, and configuration files. Understanding how to work with files and structured data is essential for threat intelligence, incident response, and security automation. Plus, proper code organization and version control are critical for secure software development.</p>
</div>
<button onclick="completeSection('intro')">Begin Learning ‚Üí</button></div>
<!-- Section 2: Working with Files -->
<div class="section hidden" id="section-files">
<h2>üìÅ Working with Files</h2>
<h3>Understanding File Paths</h3>
<p>In cybersecurity, you'll constantly work with log files, configuration files, and data dumps. Understanding paths is crucial.</p>
<div class="grid-2">
<div>
<h4 style="color: #ff4444;">Absolute Paths</h4>
<div class="code-block"><code># Linux/Mac<br>
/home/analyst/logs/firewall.log<br>
/var/log/auth.log<br><br>
# Windows<br>
C:\\Users\\Analyst\\logs\\firewall.log</code></div>
<p style="font-size: 0.9em; color: #999;">‚úì Full path from root<br>‚úì Works from anywhere<br>‚úó Not portable</p>
</div>
<div>
<h4 style="color: #ff4444;">Relative Paths</h4>
<div class="code-block"><code># From current directory<br>
./logs/firewall.log<br>
../data/threats.json<br>
../../shared/indicators.txt</code></div>
<p style="font-size: 0.9em; color: #999;">‚úì Portable across systems<br>‚úì Project-friendly<br>‚úó Depends on current location</p>
</div>
</div>
<div class="file-tree">
<div class="folder">üìÅ security_project/</div>
<div class="file">‚îú‚îÄ‚îÄ üìÑ main.py</div>
<div class="folder">‚îú‚îÄ‚îÄ üìÅ logs/</div>
<div class="file">‚îÇ ‚îú‚îÄ‚îÄ üìÑ firewall.log</div>
<div class="file">‚îÇ ‚îî‚îÄ‚îÄ üìÑ ids.log</div>
<div class="folder">‚îî‚îÄ‚îÄ üìÅ data/</div>
<div class="file">‚îî‚îÄ‚îÄ üìÑ threats.json</div>
</div>
<h3>The Safe Way: Context Managers</h3>
<div class="info-box"><strong>üõ°Ô∏è Security Best Practice:</strong>
<p>Always use <code>with open(...) as f:</code> to ensure files are properly closed, even if errors occur. Unclosed files can lead to data corruption and resource leaks.</p>
</div>
<h4>Try It: Read a Security Log</h4>
<textarea class="editable-code" id="code-file-read"># Read a firewall log file
with open('firewall.log', 'r') as f:
    logs = f.readlines()
    for log in logs:
        if 'DENY' in log:
            print(f"Blocked connection: {log.strip()}")</textarea> <button onclick="runCode('code-file-read', 'output-file-read')">üöÄ Run Code</button>
<div class="terminal" id="output-file-read">
<div class="terminal-prompt">root@cyberlab:~$ python read_log.py</div>
</div>
<h4>Try It: Write Scan Results</h4>
<textarea class="editable-code" id="code-file-write"># Write network scan results
scan_results = [
    "192.168.1.1:22 - SSH OPEN",
    "192.168.1.1:80 - HTTP OPEN",
    "192.168.1.1:443 - HTTPS OPEN"
]

with open('scan_results.txt', 'w') as f:
    for result in scan_results:
        f.write(result + '\n')
    
print("Scan results saved to scan_results.txt")
print(f"Total ports found: {len(scan_results)}")</textarea> <button onclick="runCode('code-file-write', 'output-file-write')">üöÄ Run Code</button>
<div class="terminal" id="output-file-write">
<div class="terminal-prompt">root@cyberlab:~$ python write_scan.py</div>
</div>
<div class="warning-box"><strong>‚ö†Ô∏è Common Pitfall:</strong>
<p>Never forget to specify the mode: <code>'r'</code> for reading, <code>'w'</code> for writing (overwrites!), <code>'a'</code> for appending. Using <code>'w'</code> on an existing file will erase its contents!</p>
</div>
<h4>Knowledge Check</h4>
<div class="info-box">
<p><strong>Question:</strong> What's the advantage of using <code>with open()</code> instead of just <code>open()</code>?</p>
<textarea id="answer-files" placeholder="Type your answer here..." style="margin-top: 10px;"></textarea> <button class="check-answer" onclick="checkAnswer('files')">Check Answer</button>
<div id="feedback-files" class="hidden"></div>
</div>
<button onclick="completeSection('files')">Continue to JSON ‚Üí</button></div>
<!-- Section 3: JSON Fundamentals -->
<div class="section hidden" id="section-json-basics">
<h2>üîó JSON Fundamentals</h2>
<h3>What is JSON?</h3>
<p><strong>JSON (JavaScript Object Notation)</strong> is a lightweight data format that's everywhere in modern IT and cybersecurity:</p>
<div class="grid-2">
<div class="info-box"><strong>üîç In Cybersecurity, JSON is used for:</strong>
<ul style="margin: 10px 0 0 20px;">
<li>API responses (VirusTotal, Shodan, AlienVault)</li>
<li>Threat intelligence feeds (MISP, STIX)</li>
<li>Security tool output (nmap, Nessus)</li>
<li>Configuration files</li>
<li>Log aggregation (Elasticsearch)</li>
</ul>
</div>
<div class="info-box"><strong>üìä JSON Data Types:</strong>
<ul style="margin: 10px 0 0 20px;">
<li><span class="json-key">Objects:</span> {"key": "value"}</li>
<li><span class="json-string">Strings:</span> "text"</li>
<li><span class="json-number">Numbers:</span> 42, 3.14</li>
<li><span class="json-boolean">Booleans:</span> true, false</li>
<li>Arrays: [1, 2, 3]</li>
<li>null</li>
</ul>
</div>
</div>
<h3>Real-World Example: Threat Intelligence Feed</h3>
<div class="json-viewer" id="json-example">
<pre>{
  <span class="json-key">"threat_id"</span>: <span class="json-string">"CVE-2024-1234"</span>,
  <span class="json-key">"severity"</span>: <span class="json-string">"CRITICAL"</span>,
  <span class="json-key">"cvss_score"</span>: <span class="json-number">9.8</span>,
  <span class="json-key">"affected_systems"</span>: [
    <span class="json-string">"Apache HTTP Server 2.4.x"</span>,
    <span class="json-string">"Apache HTTP Server 2.5.x"</span>
  ],
  <span class="json-key">"exploited_in_wild"</span>: <span class="json-boolean">true</span>,
  <span class="json-key">"indicators"</span>: {
    <span class="json-key">"ip_addresses"</span>: [<span class="json-string">"192.0.2.1"</span>, <span class="json-string">"198.51.100.42"</span>],
    <span class="json-key">"file_hashes"</span>: [<span class="json-string">"5d41402abc4b2a76b9719d911017c592"</span>]
  }
}</pre>
</div>
<h3>JSON Structure Breakdown</h3>
<table>
<tbody>
<tr>
<th>Structure</th>
<th>Description</th>
<th>Example</th>
</tr>
<tr>
<td><strong>Object</strong></td>
<td>Key-value pairs in {}</td>
<td><code>{"name": "John", "age": 30}</code></td>
</tr>
<tr>
<td><strong>Array</strong></td>
<td>Ordered list in []</td>
<td><code>["192.168.1.1", "10.0.0.1"]</code></td>
</tr>
<tr>
<td><strong>Nested</strong></td>
<td>Objects within objects</td>
<td><code>{"user": {"name": "John"}}</code></td>
</tr>
</tbody>
</table>
<h4>Knowledge Check</h4>
<div class="info-box">
<p><strong>Question:</strong> In cybersecurity, why is JSON preferred over CSV for threat intelligence data?</p>
<div class="quiz-option" onclick="selectQuizOption(this, false)">A) JSON is faster to parse</div>
<div class="quiz-option" onclick="selectQuizOption(this, false)">B) JSON uses less storage space</div>
<div class="quiz-option" onclick="selectQuizOption(this, true)">C) JSON supports nested data structures and complex relationships</div>
<div class="quiz-option" onclick="selectQuizOption(this, false)">D) JSON is easier to read for humans</div>
</div>
<button onclick="completeSection('json-basics')">Continue to JSON Module ‚Üí</button></div>
<!-- Section 4: Using the JSON Module -->
<div class="section hidden" id="section-json-module">
<h2>üêç Python's JSON Module</h2>
<h3>The Four Core Functions</h3>
<table>
<tbody>
<tr>
<th>Function</th>
<th>Purpose</th>
<th>Input ‚Üí Output</th>
</tr>
<tr>
<td><code>json.load()</code></td>
<td>Read from FILE</td>
<td>File object ‚Üí Python dict/list</td>
</tr>
<tr>
<td><code>json.loads()</code></td>
<td>Parse from STRING</td>
<td>JSON string ‚Üí Python dict/list</td>
</tr>
<tr>
<td><code>json.dump()</code></td>
<td>Write to FILE</td>
<td>Python dict/list ‚Üí File object</td>
</tr>
<tr>
<td><code>json.dumps()</code></td>
<td>Convert to STRING</td>
<td>Python dict/list ‚Üí JSON string</td>
</tr>
</tbody>
</table>
<div class="warning-box"><strong>üí° Memory Tip:</strong> The "s" in <code>loads()</code> and <code>dumps()</code> stands for "string"!</div>
<h3>Scenario 1: Parse a VirusTotal API Response</h3>
<textarea class="editable-code" id="code-json-parse">import json

# Simulated VirusTotal API response
vt_response = '''
{
    "scan_id": "abc123",
    "positives": 45,
    "total": 70,
    "permalink": "https://virustotal.com/file/abc123",
    "detection_engines": {
        "Kaspersky": "Trojan.Win32.Agent",
        "McAfee": "Generic.Malware",
        "Symantec": "Suspicious.File"
    }
}
'''

# Parse the JSON string
data = json.loads(vt_response)

# Analyze the results
print(f"Scan ID: {data['scan_id']}")
print(f"Detection Rate: {data['positives']}/{data['total']}")
print(f"Threat Level: {'HIGH' if data['positives'] &gt; 10 else 'LOW'}")
print("\nDetected by:")
for engine, detection in data['detection_engines'].items():
    print(f"  - {{engine}}: {{detection}}")</textarea> <button onclick="runCode('code-json-parse', 'output-json-parse')">üöÄ Run Code</button>
<div class="terminal" id="output-json-parse">
<div class="terminal-prompt">root@cyberlab:~$ python parse_vt.py</div>
</div>
<h3>Scenario 2: Generate Security Report JSON</h3>
<textarea class="editable-code" id="code-json-generate">import json

# Create a security scan report
scan_report = {
    "scan_date": "2024-11-24",
    "target": "production-server-01",
    "vulnerabilities": [
        {
            "cve": "CVE-2024-1234",
            "severity": "HIGH",
            "port": 443,
            "service": "OpenSSL"
        },
        {
            "cve": "CVE-2024-5678",
            "severity": "MEDIUM",
            "port": 22,
            "service": "OpenSSH"
        }
    ],
    "open_ports": [22, 80, 443, 3306],
    "recommendation": "Immediate patching required"
}

# Convert to pretty JSON string
json_output = json.dumps(scan_report, indent=2)
print("Generated Security Report:")
print(json_output)

# Count critical findings
high_severity = sum(1 for v in scan_report['vulnerabilities'] 
                    if v['severity'] == 'HIGH')
print(f"\n‚ö†Ô∏è  Critical vulnerabilities found: {high_severity}")</textarea> <button onclick="runCode('code-json-generate', 'output-json-generate')">üöÄ Run Code</button>
<div class="terminal" id="output-json-generate">
<div class="terminal-prompt">root@cyberlab:~$ python generate_report.py</div>
</div>
<h3>Interactive Challenge: Parse Threat Feed</h3>
<p>Complete the code to extract all malicious IPs from this threat intelligence feed:</p>
<textarea class="editable-code" id="code-json-challenge">import json

threat_feed = '''
{
    "feed_name": "MalwareDB",
    "indicators": [
        {"type": "ip", "value": "192.0.2.100", "malicious": true},
        {"type": "ip", "value": "192.0.2.101", "malicious": false},
        {"type": "ip", "value": "198.51.100.50", "malicious": true},
        {"type": "domain", "value": "evil.com", "malicious": true}
    ]
}
'''

data = json.loads(threat_feed)

# YOUR CODE HERE: Extract malicious IPs
malicious_ips = []
for indicator in data['indicators']:
    if indicator['type'] == 'ip' and indicator['malicious']:
        malicious_ips.append(indicator['value'])

print("üö´ Malicious IPs to block:")
for ip in malicious_ips:
    print(f"  - {{ip}}")</textarea> <button onclick="runCode('code-json-challenge', 'output-json-challenge')">üöÄ Run Code</button>
<div class="terminal" id="output-json-challenge">
<div class="terminal-prompt">root@cyberlab:~$ python threat_parser.py</div>
</div>
<button onclick="completeSection('json-module')">Continue to Modules ‚Üí</button></div>
<!-- Section 5: Code Modules -->
<div class="section hidden" id="section-modules">
<h2>üì¶ Structuring Code with Modules</h2>
<h3>Why Split Code into Multiple Files?</h3>
<div class="grid-2">
<div class="info-box"><strong>‚úÖ Benefits:</strong>
<ul style="margin: 10px 0 0 20px;">
<li>Reusability across projects</li>
<li>Better organization</li>
<li>Easier testing and debugging</li>
<li>Team collaboration</li>
<li>Following DRY principle</li>
</ul>
</div>
<div class="warning-box"><strong>üéØ Security Tool Example:</strong>
<p>Instead of one 1000-line script, organize your port scanner into:</p>
<ul style="margin: 10px 0 0 20px;">
<li><code>scanner.py</code> - Core scanning logic</li>
<li><code>reporter.py</code> - Output formatting</li>
<li><code>utils.py</code> - Helper functions</li>
<li><code>main.py</code> - Brings it all together</li>
</ul>
</div>
</div>
<h3>Project Structure Example</h3>
<div class="file-tree">
<div class="folder">üìÅ security_scanner/</div>
<div class="file">‚îú‚îÄ‚îÄ üìÑ main.py</div>
<div class="file">‚îú‚îÄ‚îÄ üìÑ scanner.py</div>
<div class="file">‚îú‚îÄ‚îÄ üìÑ reporter.py</div>
<div class="file">‚îú‚îÄ‚îÄ üìÑ utils.py</div>
<div class="folder">‚îî‚îÄ‚îÄ üìÅ data/</div>
<div class="file">‚îî‚îÄ‚îÄ üìÑ results.json</div>
</div>
<h3>File 1: utils.py (Helper Functions)</h3>
<div class="code-block"><code># utils.py - Utility functions for security tools

def validate_ip(ip_address):
    """Check if an IP address is valid"""
    parts = ip_address.split('.')
    if len(parts) != 4:
        return False
    try:
        return all(0 &lt;= int(part) &lt;= 255 for part in parts)
    except ValueError:
        return False

def is_privileged_port(port):
    """Check if port is in privileged range (0-1023)"""
    return 0 &lt;= port &lt;= 1023

def format_timestamp():
    """Return current timestamp for logging"""
    from datetime import datetime
    return datetime.now().strftime("%Y-%m-%d %H:%M:%S")</code></div>
<h3>File 2: scanner.py (Core Logic)</h3>
<div class="code-block"><code># scanner.py - Port scanning functionality

from utils import validate_ip, is_privileged_port

def scan_port(ip, port):
    """Simulate scanning a single port"""
    if not validate_ip(ip):
        return {"error": "Invalid IP address"}
    
    # Simulated scan results
    common_ports = [22, 80, 443, 3306, 8080]
    is_open = port in common_ports
    
    return {
        "ip": ip,
        "port": port,
        "status": "OPEN" if is_open else "CLOSED",
        "privileged": is_privileged_port(port)
    }

def scan_range(ip, start_port, end_port):
    """Scan a range of ports"""
    results = []
    for port in range(start_port, end_port + 1):
        result = scan_port(ip, port)
        if result.get("status") == "OPEN":
            results.append(result)
    return results</code></div>
<h3>File 3: main.py (Bringing It Together)</h3>
<textarea class="editable-code" id="code-modules-main"># main.py - Main program

# Import from our custom modules
from scanner import scan_range
from utils import format_timestamp

# Configuration
target_ip = "192.168.1.1"
start_port = 20
end_port = 100

print(f"[{format_timestamp()}] Starting scan of {target_ip}")
print(f"Scanning ports {start_port}-{end_port}...\n")

# Perform scan
open_ports = scan_range(target_ip, start_port, end_port)

# Display results
print(f"Found {len(open_ports)} open ports:")
for result in open_ports:
    privilege = "‚ö†Ô∏è PRIVILEGED" if result['privileged'] else ""
    print(f"  Port {result['port']}: {result['status']} {{privilege}}")

print(f"\n[{format_timestamp()}] Scan complete!")</textarea> <button onclick="runCode('code-modules-main', 'output-modules-main')">üöÄ Run Code</button>
<div class="terminal" id="output-modules-main">
<div class="terminal-prompt">root@cyberlab:~$ python main.py</div>
</div>
<div class="info-box"><strong>üîë Key Concepts:</strong>
<ul style="margin: 10px 0 0 20px;">
<li><code>from module_name import function_name</code> - Import specific functions</li>
<li><code>import module_name</code> - Import entire module (use as <code>module_name.function()</code>)</li>
<li>Python looks for modules in the same directory first</li>
<li>Module names = filename without .py extension</li>
</ul>
</div>
<h4>Knowledge Check</h4>
<div class="info-box">
<p><strong>Question:</strong> If you have a function <code>hash_password()</code> in <code>crypto_utils.py</code>, how would you import and use it?</p>
<textarea id="answer-modules" placeholder="Write the import statement and function call..." style="margin-top: 10px;"></textarea> <button class="check-answer" onclick="checkAnswer('modules')">Check Answer</button>
<div id="feedback-modules" class="hidden"></div>
</div>
<button onclick="completeSection('modules')">Continue to Git/GitHub ‚Üí</button></div>
<!-- Section 6: Git & GitHub -->
<div class="section hidden" id="section-git">
<h2>üîÄ Git &amp; GitHub Basics</h2>
<h3>What is Version Control?</h3>
<p>Git is a version control system that tracks changes to your code. GitHub is a platform for hosting Git repositories and collaborating.</p>
<div class="info-box"><strong>üõ°Ô∏è Why Security Professionals Need Git:</strong>
<ul style="margin: 10px 0 0 20px;">
<li>Track changes to security scripts and tools</li>
<li>Collaborate on incident response playbooks</li>
<li>Share proof-of-concept exploits safely</li>
<li>Maintain audit trails of configuration changes</li>
<li>Roll back to working versions after bugs</li>
<li>Contribute to open-source security tools</li>
</ul>
</div>
<h3>Core Git Workflow</h3>
<div class="git-visual">
<div><span class="git-node">Working Directory</span> <span class="git-arrow">‚Üí</span> <span class="git-node">git add</span> <span class="git-arrow">‚Üí</span> <span class="git-node">Staging Area</span> <span class="git-arrow">‚Üí</span> <span class="git-node">git commit</span> <span class="git-arrow">‚Üí</span> <span class="git-node">Local Repo</span> <span class="git-arrow">‚Üí</span> <span class="git-node">git push</span> <span class="git-arrow">‚Üí</span> <span class="git-node">GitHub</span></div>
</div>
<h3>Step 1: Initialize a Repository</h3>
<div class="code-block"><code># Navigate to your project folder
cd security_scanner

# Initialize Git repository
git init

# Check status
git status</code></div>
<div class="terminal">
<div class="terminal-prompt">root@cyberlab:~/security_scanner$ git init</div>
<div class="terminal-output">Initialized empty Git repository in /home/cyberlab/security_scanner/.git/</div>
</div>
<h3>Step 2: Make Your First Commit</h3>
<div class="code-block"><code># Add files to staging area
git add scanner.py utils.py main.py

# Or add all files
git add .

# Commit with a descriptive message
git commit -m "Initial commit: Add port scanner modules"

# View commit history
git log --oneline</code></div>
<div class="terminal">
<div class="terminal-prompt">root@cyberlab:~/security_scanner$ git commit -m "Initial commit"</div>
<div class="terminal-output">[main abc1234] Initial commit: Add port scanner modules 3 files changed, 87 insertions(+) create mode 100644 main.py create mode 100644 scanner.py create mode 100644 utils.py</div>
</div>
<h3>Step 3: Connect to GitHub</h3>
<div class="code-block"><code># Add remote repository (get URL from GitHub)
git remote add origin https://github.com/yourusername/security_scanner.git

# Push to GitHub
git push -u origin main

# Verify connection
git remote -v</code></div>
<h3>Step 4: Basic Push/Pull Workflow</h3>
<div class="grid-2">
<div>
<h4 style="color: #ff4444;">Pushing Changes</h4>
<div class="code-block"><code># Make changes to files
# (edit scanner.py)

# Stage changes
git add scanner.py

# Commit
git commit -m "Add timeout handling"

# Push to GitHub
git push</code></div>
</div>
<div>
<h4 style="color: #ff4444;">Pulling Changes</h4>
<div class="code-block"><code># Get latest changes from GitHub
git pull

# Or fetch + merge separately
git fetch origin
git merge origin/main</code></div>
</div>
</div>
<div class="warning-box"><strong>‚ö†Ô∏è Important Reminders:</strong>
<ul style="margin: 10px 0 0 20px;">
<li>Write clear, descriptive commit messages</li>
<li>Commit early and often (small, logical changes)</li>
<li>Never commit sensitive data (API keys, passwords!)</li>
<li>Use <code>.gitignore</code> to exclude sensitive files</li>
<li>Pull before you push to avoid conflicts</li>
</ul>
</div>
<h3>Common Git Commands Cheat Sheet</h3>
<table>
<tbody>
<tr>
<th>Command</th>
<th>Purpose</th>
</tr>
<tr>
<td><code>git status</code></td>
<td>Check what's changed</td>
</tr>
<tr>
<td><code>git add &lt;file&gt;</code></td>
<td>Stage a file</td>
</tr>
<tr>
<td><code>git commit -m "msg"</code></td>
<td>Save changes with message</td>
</tr>
<tr>
<td><code>git push</code></td>
<td>Upload to GitHub</td>
</tr>
<tr>
<td><code>git pull</code></td>
<td>Download from GitHub</td>
</tr>
<tr>
<td><code>git log</code></td>
<td>View commit history</td>
</tr>
<tr>
<td><code>git diff</code></td>
<td>See what changed</td>
</tr>
</tbody>
</table>
<h4>Quick Quiz</h4>
<div class="info-box">
<p><strong>Question:</strong> In what order do you typically use these Git commands?</p>
<div class="quiz-option" onclick="selectQuizOption(this, false)">A) commit ‚Üí add ‚Üí push</div>
<div class="quiz-option" onclick="selectQuizOption(this, true)">B) add ‚Üí commit ‚Üí push</div>
<div class="quiz-option" onclick="selectQuizOption(this, false)">C) push ‚Üí commit ‚Üí add</div>
<div class="quiz-option" onclick="selectQuizOption(this, false)">D) commit ‚Üí push ‚Üí add</div>
</div>
<button onclick="completeSection('git')">Continue to Copilot ‚Üí</button></div>
<!-- Section 7: GitHub Copilot -->
<div class="section hidden" id="section-copilot">
<h2>ü§ñ GitHub Copilot &amp; AI Coding Assistants</h2>
<h3>What is GitHub Copilot?</h3>
<p>GitHub Copilot is an AI-powered code completion tool that suggests code as you type. It's trained on billions of lines of public code.</p>
<div class="grid-2">
<div class="info-box"><strong>‚úÖ Benefits:</strong>
<ul style="margin: 10px 0 0 20px;">
<li>Faster coding (autocomplete on steroids)</li>
<li>Learn new syntax and patterns</li>
<li>Generate boilerplate code</li>
<li>Suggest algorithms and solutions</li>
<li>Write documentation and comments</li>
</ul>
</div>
<div class="warning-box"><strong>‚ö†Ô∏è Risks &amp; Limitations:</strong>
<ul style="margin: 10px 0 0 20px;">
<li>May suggest vulnerable code</li>
<li>Can be confidently wrong</li>
<li>May include copyrighted code</li>
<li>Doesn't understand context fully</li>
<li>Can reinforce bad habits</li>
</ul>
</div>
</div>
<h3>Getting Started with Copilot</h3>
<div class="code-block"><code># 1. Install in VS Code
   Extensions ‚Üí Search "GitHub Copilot" ‚Üí Install

# 2. Authenticate
   Command Palette (Ctrl+Shift+P) ‚Üí "GitHub Copilot: Sign In"

# 3. Toggle on/off
   Status bar shows Copilot icon
   Click to enable/disable</code></div>
<h3>Using Copilot Effectively</h3>
<div class="info-box"><strong>üí° Best Practices:</strong>
<ul style="margin: 10px 0 0 20px;">
<li>Write clear comments to guide suggestions</li>
<li>Review every suggestion before accepting</li>
<li>Use Tab to accept, Esc to reject</li>
<li>Alt+] to cycle through alternatives</li>
<li>Trust but verify - test all AI code</li>
</ul>
</div>
<h3>Scenario 1: Copilot Suggests a Function</h3>
<p>You're writing a password validator. You type a comment, and Copilot suggests code:</p>
<div class="copilot-suggestion">
<div class="copilot-label">ü§ñ Copilot Suggestion</div>
<div class="code-block"><code># Function to validate password strength
def validate_password(password):
    if len(password) &lt; 8:
        return False
    return True</code></div>
</div>
<div class="info-box">
<p><strong>üîç Your Task:</strong> Review this code. What's wrong with it?</p>
<textarea id="copilot-review-1" placeholder="List security issues with this code..."></textarea> <button onclick="checkCopilotReview(1)">Check Answer</button>
<div id="feedback-copilot-1" class="hidden"></div>
</div>
<h3>Scenario 2: Better Version After Review</h3>
<p>After thinking critically, you improve Copilot's suggestion:</p>
<div class="copilot-suggestion">
<div class="copilot-label">‚úÖ Improved by Human</div>
<div class="code-block"><code>def validate_password(password):
    """
    Validate password meets security requirements:
    - At least 12 characters
    - Contains uppercase, lowercase, digit, special char
    """
    if len(password) &lt; 12:
        return False, "Password must be at least 12 characters"
    
    has_upper = any(c.isupper() for c in password)
    has_lower = any(c.islower() for c in password)
    has_digit = any(c.isdigit() for c in password)
    has_special = any(c in '!@#$%^&amp;*' for c in password)
    
    if not all([has_upper, has_lower, has_digit, has_special]):
        return False, "Password must contain uppercase, lowercase, digit, and special character"
    
    return True, "Password is strong"</code></div>
</div>
<h3>Scenario 3: SQL Injection Risk</h3>
<p>Copilot suggests code for a login function:</p>
<div class="copilot-suggestion">
<div class="copilot-label">ü§ñ Copilot Suggestion</div>
<div class="code-block"><code>def login(username, password):
    query = f"SELECT * FROM users WHERE username='{{username}}' AND password='{{password}}'"
    result = database.execute(query)
    return result</code></div>
</div>
<div class="info-box">
<p><strong>üîç Your Task:</strong> This code has a critical security vulnerability. What is it?</p>
<div class="quiz-option" onclick="selectQuizOption(this, false)">A) Password is not hashed</div>
<div class="quiz-option" onclick="selectQuizOption(this, true)">B) Vulnerable to SQL injection attacks</div>
<div class="quiz-option" onclick="selectQuizOption(this, false)">C) No error handling</div>
<div class="quiz-option" onclick="selectQuizOption(this, false)">D) Query is too slow</div>
</div>
<h3>Guardrails for AI Coding</h3>
<div class="warning-box"><strong>üõ°Ô∏è Essential Security Checklist:</strong>
<ol style="margin: 10px 0 0 20px;">
<li><strong>Never blindly accept</strong> - Read and understand all AI code</li>
<li><strong>Test thoroughly</strong> - Run code with various inputs</li>
<li><strong>Check for vulnerabilities</strong> - Injection, XSS, hardcoded secrets</li>
<li><strong>Verify logic</strong> - Does it actually solve the problem correctly?</li>
<li><strong>Add comments</strong> - Explain what the code does in your own words</li>
<li><strong>Follow best practices</strong> - Don't let AI lead you astray</li>
<li><strong>Keep learning</strong> - Don't become dependent on AI</li>
</ol>
</div>
<h3>When to Use (and Not Use) Copilot</h3>
<table>
<tbody>
<tr>
<th>Good Use Cases ‚úÖ</th>
<th>Avoid Using ‚ö†Ô∏è</th>
</tr>
<tr>
<td>Boilerplate code</td>
<td>Security-critical functions</td>
</tr>
<tr>
<td>Docstrings and comments</td>
<td>Cryptographic implementations</td>
</tr>
<tr>
<td>Test cases</td>
<td>Input validation for user data</td>
</tr>
<tr>
<td>Simple helper functions</td>
<td>Authentication/authorization logic</td>
</tr>
<tr>
<td>Code formatting</td>
<td>When you don't understand the problem</td>
</tr>
</tbody>
</table>
<div class="success-box"><strong>üéØ Remember:</strong> Copilot is a tool to assist you, not replace you. Your critical thinking, security knowledge, and code review skills are irreplaceable. Use AI as your junior assistant, not your senior architect.</div>
<button onclick="completeSection('copilot')">Continue to Final Challenge ‚Üí</button></div>
<!-- Section 8: Final Challenge -->
<div class="section hidden" id="section-challenge">
<h2>üéØ Final Challenge: Build a Threat Intelligence Parser</h2>
<p>Put everything together! You'll build a tool that:</p>
<ul style="margin: 10px 0 10px 30px;">
<li>Reads threat data from a JSON file</li>
<li>Parses and analyzes the data</li>
<li>Generates a security report</li>
<li>Uses modular code structure</li>
</ul>
<div class="info-box"><strong>üìã Challenge Requirements:</strong>
<ol style="margin: 10px 0 0 20px;">
<li>Parse the JSON threat feed below</li>
<li>Count threats by severity level</li>
<li>Extract all malicious IPs</li>
<li>Identify threats with active exploits</li>
<li>Generate a formatted report</li>
</ol>
</div>
<h3>Sample Threat Feed (threats.json)</h3>
<div class="json-viewer">
<pre>{
  "feed_name": "Daily Threat Intelligence",
  "date": "2024-11-24",
  "threats": [
    {
      "id": "THREAT-001",
      "type": "malware",
      "severity": "CRITICAL",
      "indicators": {
        "ips": ["198.51.100.42", "198.51.100.43"],
        "domains": ["evil-domain.com"]
      },
      "active_exploit": true,
      "description": "Ransomware campaign targeting healthcare"
    },
    {
      "id": "THREAT-002",
      "type": "phishing",
      "severity": "HIGH",
      "indicators": {
        "ips": ["192.0.2.100"],
        "domains": ["fake-bank.com", "secure-login.net"]
      },
      "active_exploit": false,
      "description": "Banking credential phishing"
    },
    {
      "id": "THREAT-003",
      "type": "botnet",
      "severity": "MEDIUM",
      "indicators": {
        "ips": ["203.0.113.50", "203.0.113.51", "203.0.113.52"],
        "domains": []
      },
      "active_exploit": true,
      "description": "IoT botnet C2 infrastructure"
    }
  ]
}</pre>
</div>
<h3>Your Code</h3>
<textarea class="editable-code" id="code-challenge">import json

# Sample threat feed data
threat_feed = '''
{
  "feed_name": "Daily Threat Intelligence",
  "date": "2024-11-24",
  "threats": [
    {
      "id": "THREAT-001",
      "type": "malware",
      "severity": "CRITICAL",
      "indicators": {"ips": ["198.51.100.42", "198.51.100.43"], "domains": ["evil-domain.com"]},
      "active_exploit": true,
      "description": "Ransomware campaign targeting healthcare"
    },
    {
      "id": "THREAT-002",
      "type": "phishing",
      "severity": "HIGH",
      "indicators": {"ips": ["192.0.2.100"], "domains": ["fake-bank.com", "secure-login.net"]},
      "active_exploit": false,
      "description": "Banking credential phishing"
    },
    {
      "id": "THREAT-003",
      "type": "botnet",
      "severity": "MEDIUM",
      "indicators": {"ips": ["203.0.113.50", "203.0.113.51", "203.0.113.52"], "domains": []},
      "active_exploit": true,
      "description": "IoT botnet C2 infrastructure"
    }
  ]
}
'''

# Parse JSON
data = json.loads(threat_feed)

# Analyze threats
print(f"=== {data['feed_name']} ===")
print(f"Date: {data['date']}\n")

# Count by severity
severity_count = {}
for threat in data['threats']:
    sev = threat['severity']
    severity_count[sev] = severity_count.get(sev, 0) + 1

print("Threats by Severity:")
for severity, count in sorted(severity_count.items()):
    print(f"  {{severity}}: {{count}}")

# Extract all malicious IPs
all_ips = []
for threat in data['threats']:
    all_ips.extend(threat['indicators']['ips'])

print(f"\nTotal Malicious IPs: {len(all_ips)}")
print("IPs to Block:")
for ip in all_ips:
    print(f"  - {{ip}}")

# Active exploits
active_threats = [t for t in data['threats'] if t['active_exploit']]
print(f"\n‚ö†Ô∏è  Active Exploits: {len(active_threats)}")
for threat in active_threats:
    print(f"  - {threat['id']}: {threat['description']}")</textarea> <button onclick="runCode('code-challenge', 'output-challenge')">üöÄ Run Your Code</button>
<div class="terminal" id="output-challenge">
<div class="terminal-prompt">root@cyberlab:~$ python threat_parser.py</div>
</div>
<div class="success-box"><strong>üèÜ Bonus Challenge:</strong> Modify the code to also:
<ul style="margin: 10px 0 0 20px;">
<li>Count threats by type (malware, phishing, botnet)</li>
<li>List all malicious domains</li>
<li>Calculate the percentage of CRITICAL threats</li>
<li>Save the report to a file using <code>with open()</code></li>
</ul>
</div>
<button onclick="completeSection('challenge')">Continue to Final Quiz ‚Üí</button></div>
<!-- Section 9: Final Quiz -->
<div class="section hidden" id="section-quiz">
<h2>üìù Final Assessment Quiz</h2>
<div id="quiz-container">
<div class="quiz-question" id="q1">
<h3>Question 1 of 5</h3>
<p>What's the main advantage of using <code>with open()</code> over regular <code>open()</code>?</p>
<div class="quiz-option" onclick="answerQuiz(1, 'A', false)">A) It's faster</div>
<div class="quiz-option" onclick="answerQuiz(1, 'B', true)">B) It automatically closes the file, even if errors occur</div>
<div class="quiz-option" onclick="answerQuiz(1, 'C', false)">C) It uses less memory</div>
<div class="quiz-option" onclick="answerQuiz(1, 'D', false)">D) It can read multiple files at once</div>
</div>
<div class="quiz-question hidden" id="q2">
<h3>Question 2 of 5</h3>
<p>Which function would you use to parse a JSON string into a Python dictionary?</p>
<div class="quiz-option" onclick="answerQuiz(2, 'A', false)">A) json.load()</div>
<div class="quiz-option" onclick="answerQuiz(2, 'B', true)">B) json.loads()</div>
<div class="quiz-option" onclick="answerQuiz(2, 'C', false)">C) json.parse()</div>
<div class="quiz-option" onclick="answerQuiz(2, 'D', false)">D) json.dumps()</div>
</div>
<div class="quiz-question hidden" id="q3">
<h3>Question 3 of 5</h3>
<p>If you want to import a function called <code>scan_port()</code> from a file called <code>scanner.py</code>, which statement is correct?</p>
<div class="quiz-option" onclick="answerQuiz(3, 'A', true)">A) from scanner import scan_port</div>
<div class="quiz-option" onclick="answerQuiz(3, 'B', false)">B) import scan_port from scanner</div>
<div class="quiz-option" onclick="answerQuiz(3, 'C', false)">C) from scanner.py import scan_port</div>
<div class="quiz-option" onclick="answerQuiz(3, 'D', false)">D) include scanner.scan_port</div>
</div>
<div class="quiz-question hidden" id="q4">
<h3>Question 4 of 5</h3>
<p>What's the correct order of Git commands to save and upload changes?</p>
<div class="quiz-option" onclick="answerQuiz(4, 'A', false)">A) commit ‚Üí add ‚Üí push</div>
<div class="quiz-option" onclick="answerQuiz(4, 'B', true)">B) add ‚Üí commit ‚Üí push</div>
<div class="quiz-option" onclick="answerQuiz(4, 'C', false)">C) push ‚Üí add ‚Üí commit</div>
<div class="quiz-option" onclick="answerQuiz(4, 'D', false)">D) add ‚Üí push ‚Üí commit</div>
</div>
<div class="quiz-question hidden" id="q5">
<h3>Question 5 of 5</h3>
<p>When using GitHub Copilot, what's the MOST important thing to do before accepting a suggestion?</p>
<div class="quiz-option" onclick="answerQuiz(5, 'A', false)">A) Check if it's shorter than your own code</div>
<div class="quiz-option" onclick="answerQuiz(5, 'B', false)">C) Accept it immediately to save time</div>
<div class="quiz-option" onclick="answerQuiz(5, 'C', true)">B) Review it for correctness, security vulnerabilities, and understanding</div>
<div class="quiz-option" onclick="answerQuiz(5, 'D', false)">D) Copy it to multiple projects</div>
</div>
<div class="quiz-results hidden" id="quiz-results">
<h3>üéâ Quiz Complete!</h3>
<div class="success-box">
<p style="font-size: 1.5em; margin: 20px 0;">Score: <span id="quiz-score">0</span>/5</p>
<p id="quiz-feedback"></p>
</div>
<button onclick="location.reload()">Restart Module</button></div>
</div>
</div>
<!-- Completion Section -->
<div class="section hidden" id="section-complete">
<h2>üéä Congratulations!</h2>
<div class="success-box">
<h3>You've completed Module 4!</h3>
<p style="font-size: 1.2em; margin: 20px 0;">You've mastered:</p>
<ul style="margin: 10px 0 20px 30px; font-size: 1.1em;">
<li>‚úÖ File operations with context managers</li>
<li>‚úÖ JSON parsing for threat intelligence</li>
<li>‚úÖ Modular code organization</li>
<li>‚úÖ Git &amp; GitHub workflows</li>
<li>‚úÖ Safe AI coding practices</li>
</ul>
</div>
<div class="info-box"><strong>üöÄ Next Steps:</strong>
<ul style="margin: 10px 0 0 20px;">
<li>Practice these concepts with your own security projects</li>
<li>Set up a GitHub account and create your first repository</li>
<li>Install GitHub Copilot in VS Code</li>
<li>Build a tool that combines files, JSON, and modules</li>
<li>Explore advanced Git features (branches, merges, pull requests)</li>
</ul>
</div>
<div class="badge">Module Completed</div>
<div class="badge">Files Master</div>
<div class="badge">JSON Expert</div>
<div class="badge">Git Initialized</div>
<div class="badge">AI-Aware Coder</div>
</div>
</div>
<p><script>
        // State management
        let progress = 0;
        let completedSections = [];
        let quizAnswers = {};
        let quizScore = 0;
        let currentQuestion = 1;

        // Load saved progress
        window.addEventListener('load', () => {
            const saved = localStorage.getItem('pythonModuleProgress');
            if (saved) {
                completedSections = JSON.parse(saved);
                progress = (completedSections.length / 9) * 100;
                updateProgress();
                
                // Mark completed sections
                completedSections.forEach(section => {
                    const elem = document.getElementById(`section-${{section}}`);
                    if (elem) elem.classList.add('completed');
                });
            }
        });

        function updateProgress() {
            const progressBar = document.getElementById('progressBar');
            progressBar.style.width = progress + '%';
            progressBar.textContent = Math.round(progress) + '% Complete';
            
            // Save to localStorage
            localStorage.setItem('pythonModuleProgress', JSON.stringify(completedSections));
        }

        function completeSection(sectionName) {
            // Hide current section
            const currentSection = document.querySelector('.section:not(.hidden)');
            if (currentSection) {
                currentSection.classList.add('hidden');
                currentSection.classList.add('completed');
            }

            // Track completion
            if (!completedSections.includes(sectionName)) {
                completedSections.push(sectionName);
                progress = (completedSections.length / 9) * 100;
                updateProgress();
            }

            // Show next section
            const sectionMap = {
                'intro': 'files',
                'files': 'json-basics',
                'json-basics': 'json-module',
                'json-module': 'modules',
                'modules': 'git',
                'git': 'copilot',
                'copilot': 'challenge',
                'challenge': 'quiz',
                'quiz': 'complete'
            };

            const nextSection = sectionMap[sectionName];
            if (nextSection) {
                document.getElementById(`section-${{nextSection}}`).classList.remove('hidden');
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        // Simulated Python code execution
        function runCode(codeId, outputId) {
            const code = document.getElementById(codeId).value;
            const output = document.getElementById(outputId);
            
            // Clear previous output and show loading
            output.innerHTML = '<div class="terminal-prompt">root@cyberlab:~$ python script.py</div><div class="terminal-output">Executing code...</div>';
            
            // Simulate execution delay
            setTimeout(() => {
                try {
                    const result = simulatePython(code);
                    output.innerHTML = '<div class="terminal-prompt">root@cyberlab:~$ python script.py</div>';
                    output.innerHTML += `<div class="terminal-output">${{result}}</div>`;
                } catch (e) {
                    output.innerHTML = '<div class="terminal-prompt">root@cyberlab:~$ python script.py</div>';
                    output.innerHTML += `<div class="terminal-error">Error: ${e.message}</div>`;
                }
            }, 800);
        }

        function resetProgress() {
            if (confirm('Are you sure you want to reset all progress? This cannot be undone.')) {
                localStorage.removeItem('pythonModuleProgress');
                location.reload();
            }
        }

        // Simulate Python execution (limited simulation)
        function simulatePython(code) {
            // Firewall log reading
            if (code.includes('firewall.log') && code.includes('DENY')) {
                return `Blocked connection: 2024-11-24 10:15:32 DENY TCP 192.168.1.100:54321 -> 10.0.0.5:445
Blocked connection: 2024-11-24 10:16:45 DENY TCP 192.168.1.100:54322 -> 10.0.0.5:135
Blocked connection: 2024-11-24 10:17:12 DENY UDP 192.168.1.100:53 -> 8.8.8.8:53`;
            }

            // Scan results writing
            if (code.includes('scan_results')) {
                return `Scan results saved to scan_results.txt
Total ports found: 3`;
            }

            // VirusTotal JSON parsing
            if (code.includes('vt_response') || code.includes('virustotal')) {
                return `Scan ID: abc123
Detection Rate: 45/70
Threat Level: HIGH

Detected by:
  - Kaspersky: Trojan.Win32.Agent
  - McAfee: Generic.Malware
  - Symantec: Suspicious.File`;
            }

            // Security report generation
            if (code.includes('scan_report') && code.includes('vulnerabilities')) {
                return `Generated Security Report:
{
  "scan_date": "2024-11-24",
  "target": "production-server-01",
  "vulnerabilities": [
    {
      "cve": "CVE-2024-1234",
      "severity": "HIGH",
      "port": 443,
      "service": "OpenSSL"
    },
    {
      "cve": "CVE-2024-5678",
      "severity": "MEDIUM",
      "port": 22,
      "service": "OpenSSH"
    }
  ],
  "open_ports": [22, 80, 443, 3306],
  "recommendation": "Immediate patching required"
}

‚ö†Ô∏è  Critical vulnerabilities found: 1`;
            }

            // Threat feed parsing challenge
            if (code.includes('threat_feed') || code.includes('malicious_ips')) {
                return `üö´ Malicious IPs to block:
  - 192.0.2.100
  - 198.51.100.50`;
            }

            // Modules main.py
            if (code.includes('scan_range') && code.includes('format_timestamp')) {
                return `[2024-11-24 14:32:15] Starting scan of 192.168.1.1
Scanning ports 20-100...

Found 5 open ports:
  Port 22: OPEN ‚ö†Ô∏è PRIVILEGED
  Port 80: OPEN ‚ö†Ô∏è PRIVILEGED
  Port 443: OPEN ‚ö†Ô∏è PRIVILEGED
  Port 3306: OPEN
  Port 8080: OPEN

[2024-11-24 14:32:18] Scan complete!`;
            }

            // Final challenge
            if (code.includes('Daily Threat Intelligence') || code.includes('severity_count')) {
                return `=== Daily Threat Intelligence ===
Date: 2024-11-24

Threats by Severity:
  CRITICAL: 1
  HIGH: 1
  MEDIUM: 1

Total Malicious IPs: 6
IPs to Block:
  - 198.51.100.42
  - 198.51.100.43
  - 192.0.2.100
  - 203.0.113.50
  - 203.0.113.51
  - 203.0.113.52

‚ö†Ô∏è  Active Exploits: 2
  - THREAT-001: Ransomware campaign targeting healthcare
  - THREAT-003: IoT botnet C2 infrastructure`;
            }

            return "Code executed successfully!";
        }

        // Answer checking
        function checkAnswer(section) {
            const answer = document.getElementById(`answer-${{section}}`).value.toLowerCase();
            const feedback = document.getElementById(`feedback-${{section}}`);
            feedback.classList.remove('hidden');

            if (section === 'files') {
                if (answer.includes('close') || answer.includes('automatic') || answer.includes('context') || answer.includes('error')) {
                    feedback.innerHTML = '<div class="success-box">‚úÖ Correct! The <code>with</code> statement automatically closes the file, even if an error occurs, preventing resource leaks and data corruption.</div>';
                } else {
                    feedback.innerHTML = '<div class="warning-box">Not quite. Think about what happens to the file after the code block completes or if an error occurs.</div>';
                }
            } else if (section === 'modules') {
                if (answer.includes('from crypto_utils import hash_password') || answer.includes('import') && answer.includes('crypto_utils')) {
                    feedback.innerHTML = '<div class="success-box">‚úÖ Correct! You can use: <code>from crypto_utils import hash_password</code> then call it with <code>hash_password("mypassword")</code></div>';
                } else {
                    feedback.innerHTML = '<div class="warning-box">Not quite. You need to import the function from the module first. The syntax is: <code>from module_name import function_name</code></div>';
                }
            }
        }

        function selectQuizOption(element, isCorrect) {
            // Remove previous selections from siblings
            const siblings = element.parentElement.querySelectorAll('.quiz-option');
            siblings.forEach(sib => {
                sib.classList.remove('correct', 'incorrect');
            });

            // Mark this selection
            if (isCorrect) {
                element.classList.add('correct');
                setTimeout(() => {
                    // Auto-advance after correct answer
                    const currentSection = element.closest('.section');
                    if (currentSection.id === 'section-json-basics') {
                        completeSection('json-basics');
                    } else if (currentSection.id === 'section-git') {
                        completeSection('git');
                    }
                }, 1000);
            } else {
                element.classList.add('incorrect');
            }
        }

        // Copilot review checking
        function checkCopilotReview(scenario) {
            const answer = document.getElementById(`copilot-review-${{scenario}}`).value.toLowerCase();
            const feedback = document.getElementById(`feedback-copilot-${{scenario}}`);
            feedback.classList.remove('hidden');

            if (scenario === 1) {
                const hasIssues = (answer.includes('weak') || answer.includes('length') || 
                                 answer.includes('8') || answer.includes('complexity') || 
                                 answer.includes('character') || answer.includes('special') ||
                                 answer.includes('uppercase') || answer.includes('lowercase'));
                
                if (hasIssues) {
                    feedback.innerHTML = `<div class="success-box">‚úÖ Great analysis! This password validator is too weak. It only checks length (minimum 8 is too short by modern standards), and doesn't verify:
<ul style="margin: 10px 0 0 20px;">
<li>Uppercase letters</li>
<li>Lowercase letters</li>
<li>Numbers</li>
<li>Special characters</li>
<li>Common passwords (dictionary check)</li>
</ul>
In cybersecurity, we need robust password validation!</div>`;
                } else {
                    feedback.innerHTML = '<div class="warning-box">‚ö†Ô∏è Look more carefully. Consider: Is checking only length enough? What about character complexity? What would make a strong password?</div>';
                }
            }
        }

        // Quiz functionality
        function answerQuiz(questionNum, answer, isCorrect) {
            quizAnswers[questionNum] = isCorrect;
            
            // Mark answer
            const question = document.getElementById(`q${{questionNum}}`);
            const options = question.querySelectorAll('.quiz-option');
            options.forEach(opt => {
                opt.style.pointerEvents = 'none';
                if (opt.textContent.trim().startsWith(answer)) {
                    opt.classList.add(isCorrect ? 'correct' : 'incorrect');
                }
            });

            // Calculate score
            if (isCorrect) quizScore++;

            // Move to next question or show results
            setTimeout(() => {
                if (questionNum < 5) {
                    document.getElementById(`q${{questionNum}}`).classList.add('hidden');
                    document.getElementById(`q${questionNum + 1}`).classList.remove('hidden');
                } else {
                    showQuizResults();
                }
            }, 1500);
        }

        function showQuizResults() {
            document.getElementById('q5').classList.add('hidden');
            document.getElementById('quiz-results').classList.remove('hidden');
            document.getElementById('quiz-score').textContent = quizScore;

            let feedback = '';
            if (quizScore === 5) {
                feedback = 'üåü Perfect score! You\'ve mastered all the concepts!';
            } else if (quizScore >= 4) {
                feedback = 'üéâ Great job! You have a solid understanding of the material.';
            } else if (quizScore >= 3) {
                feedback = 'üëç Good work! Review the sections where you missed questions.';
            } else {
                feedback = 'üìö Keep practicing! Review the material and try again.';
            }
            document.getElementById('quiz-feedback').textContent = feedback;

            // Complete the module
            if (!completedSections.includes('quiz')) {
                completedSections.push('quiz');
                progress = 100;
                updateProgress();
            }

            // Show completion section
            setTimeout(() => {
                document.getElementById('quiz-results').classList.add('hidden');
                document.getElementById('section-quiz').classList.add('hidden');
                document.getElementById('section-complete').classList.remove('hidden');
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }, 5000);
        }

        // Initialize first section
        document.addEventListener('DOMContentLoaded', () => {
            if (completedSections.length === 0) {
                document.getElementById('section-intro').classList.remove('hidden');
            }
        });
    </script></p></body></html>
