<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Week 10: Configuration Drift Checker | CyberSec Python Lab</title>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500;600;700&family=Orbitron:wght@400;500;600;700;800;900&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-red: #dc2626;
            --dark-red: #991b1b;
            --accent-red: #ef4444;
            --bright-red: #f87171;
            --black: #0a0a0a;
            --dark-gray: #1a1a1a;
            --medium-gray: #2d2d2d;
            --light-gray: #404040;
            --text-gray: #9ca3af;
            --text-light: #e5e5e5;
            --white: #ffffff;
            --success-green: #22c55e;
            --warning-yellow: #eab308;
            --code-bg: #0d0d0d;
            --missing-bg: rgba(220, 38, 38, 0.15);
            --extra-bg: rgba(234, 179, 8, 0.15);
            --changed-bg: rgba(139, 92, 246, 0.15);
            --match-bg: rgba(34, 197, 94, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Rajdhani', sans-serif;
            background: var(--black);
            color: var(--text-light);
            min-height: 100vh;
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Animated Background */
        .bg-grid {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(220, 38, 38, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(220, 38, 38, 0.03) 1px, transparent 1px);
            background-size: 50px 50px;
            pointer-events: none;
            z-index: -1;
        }

        .scanline {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: repeating-linear-gradient(
                0deg,
                transparent,
                transparent 2px,
                rgba(0, 0, 0, 0.1) 2px,
                rgba(0, 0, 0, 0.1) 4px
            );
            pointer-events: none;
            z-index: 1000;
            opacity: 0.3;
        }

        /* Header */
        header {
            background: linear-gradient(180deg, var(--dark-gray) 0%, var(--black) 100%);
            border-bottom: 2px solid var(--primary-red);
            padding: 1.5rem 2rem;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            max-width: 1600px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .week-badge {
            background: var(--primary-red);
            color: var(--white);
            padding: 0.3rem 0.8rem;
            font-family: 'Orbitron', monospace;
            font-size: 0.8rem;
            font-weight: 700;
            border-radius: 2px;
            letter-spacing: 2px;
        }

        h1 {
            font-family: 'Orbitron', monospace;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--white);
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        h1 span {
            color: var(--primary-red);
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-family: 'Fira Code', monospace;
            font-size: 0.85rem;
            color: var(--text-gray);
        }

        .status-dot {
            width: 8px;
            height: 8px;
            background: var(--success-green);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Navigation */
        nav {
            background: var(--dark-gray);
            border-bottom: 1px solid var(--medium-gray);
            padding: 0;
            position: sticky;
            top: 75px;
            z-index: 99;
        }

        .nav-container {
            max-width: 1600px;
            margin: 0 auto;
            display: flex;
            overflow-x: auto;
            scrollbar-width: thin;
            scrollbar-color: var(--primary-red) var(--dark-gray);
        }

        .nav-container::-webkit-scrollbar {
            height: 4px;
        }

        .nav-container::-webkit-scrollbar-track {
            background: var(--dark-gray);
        }

        .nav-container::-webkit-scrollbar-thumb {
            background: var(--primary-red);
        }

        .nav-btn {
            background: none;
            border: none;
            color: var(--text-gray);
            padding: 1rem 1.5rem;
            font-family: 'Rajdhani', sans-serif;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .nav-btn:hover {
            color: var(--text-light);
            background: rgba(220, 38, 38, 0.1);
        }

        .nav-btn.active {
            color: var(--primary-red);
            border-bottom-color: var(--primary-red);
            background: rgba(220, 38, 38, 0.05);
        }

        /* Main Content */
        main {
            max-width: 1600px;
            margin: 0 auto;
            padding: 2rem;
        }

        .section {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Section Header */
        .section-header {
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--medium-gray);
        }

        .section-title {
            font-family: 'Orbitron', monospace;
            font-size: 1.8rem;
            color: var(--white);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .section-title::before {
            content: '';
            width: 4px;
            height: 30px;
            background: var(--primary-red);
        }

        .section-subtitle {
            color: var(--text-gray);
            font-size: 1.1rem;
            margin-left: 1.25rem;
        }

        /* Cards */
        .card {
            background: var(--dark-gray);
            border: 1px solid var(--medium-gray);
            border-radius: 4px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1rem;
            padding-bottom: 0.75rem;
            border-bottom: 1px solid var(--medium-gray);
        }

        .card-icon {
            width: 32px;
            height: 32px;
            background: var(--primary-red);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
        }

        .card-title {
            font-family: 'Orbitron', monospace;
            font-size: 1.1rem;
            color: var(--white);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Code Blocks */
        .code-block {
            background: var(--code-bg);
            border: 1px solid var(--medium-gray);
            border-radius: 4px;
            overflow: hidden;
            margin: 1rem 0;
        }

        .code-header {
            background: var(--medium-gray);
            padding: 0.5rem 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--light-gray);
        }

        .code-label {
            font-family: 'Fira Code', monospace;
            font-size: 0.8rem;
            color: var(--text-gray);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .copy-btn {
            background: var(--light-gray);
            border: none;
            color: var(--text-light);
            padding: 0.3rem 0.8rem;
            font-family: 'Fira Code', monospace;
            font-size: 0.75rem;
            cursor: pointer;
            border-radius: 2px;
            transition: all 0.3s ease;
        }

        .copy-btn:hover {
            background: var(--primary-red);
        }

        .code-content {
            padding: 1rem;
            overflow-x: auto;
            font-family: 'Fira Code', monospace;
            font-size: 0.85rem;
            line-height: 1.7;
            color: var(--text-light);
        }

        .code-content pre {
            margin: 0;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        /* Syntax Highlighting */
        .keyword { color: var(--primary-red); }
        .function { color: #60a5fa; }
        .string { color: var(--success-green); }
        .comment { color: var(--text-gray); font-style: italic; }
        .number { color: #f472b6; }
        .class-name { color: #fbbf24; }
        .property { color: #a78bfa; }
        .operator { color: var(--accent-red); }

        /* Interactive Demo Area */
        .demo-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            margin: 1.5rem 0;
        }

        @media (max-width: 1024px) {
            .demo-container {
                grid-template-columns: 1fr;
            }
        }

        .json-panel {
            background: var(--code-bg);
            border: 1px solid var(--medium-gray);
            border-radius: 4px;
            overflow: hidden;
        }

        .panel-header {
            background: var(--medium-gray);
            padding: 0.75rem 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--light-gray);
        }

        .panel-title {
            font-family: 'Orbitron', monospace;
            font-size: 0.9rem;
            color: var(--text-light);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .baseline-indicator {
            width: 10px;
            height: 10px;
            background: var(--success-green);
            border-radius: 2px;
        }

        .current-indicator {
            width: 10px;
            height: 10px;
            background: var(--warning-yellow);
            border-radius: 2px;
        }

        .json-textarea {
            width: 100%;
            min-height: 300px;
            background: var(--code-bg);
            border: none;
            color: var(--text-light);
            font-family: 'Fira Code', monospace;
            font-size: 0.85rem;
            padding: 1rem;
            resize: vertical;
            line-height: 1.6;
        }

        .json-textarea:focus {
            outline: none;
            box-shadow: inset 0 0 0 1px var(--primary-red);
        }

        /* Diff Results */
        .diff-results {
            background: var(--dark-gray);
            border: 1px solid var(--medium-gray);
            border-radius: 4px;
            margin-top: 1.5rem;
            overflow: hidden;
        }

        .diff-header {
            background: var(--medium-gray);
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .diff-title {
            font-family: 'Orbitron', monospace;
            font-size: 1rem;
            color: var(--white);
        }

        .diff-stats {
            display: flex;
            gap: 1.5rem;
            font-family: 'Fira Code', monospace;
            font-size: 0.85rem;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .stat-badge {
            padding: 0.2rem 0.5rem;
            border-radius: 2px;
            font-weight: 600;
        }

        .stat-missing { background: var(--primary-red); color: var(--white); }
        .stat-extra { background: var(--warning-yellow); color: var(--black); }
        .stat-changed { background: #8b5cf6; color: var(--white); }
        .stat-match { background: var(--success-green); color: var(--black); }

        .diff-content {
            padding: 1rem;
            max-height: 500px;
            overflow-y: auto;
        }

        .diff-item {
            padding: 0.75rem 1rem;
            margin-bottom: 0.5rem;
            border-radius: 4px;
            font-family: 'Fira Code', monospace;
            font-size: 0.85rem;
            display: flex;
            align-items: flex-start;
            gap: 1rem;
        }

        .diff-missing { background: var(--missing-bg); border-left: 3px solid var(--primary-red); }
        .diff-extra { background: var(--extra-bg); border-left: 3px solid var(--warning-yellow); }
        .diff-changed { background: var(--changed-bg); border-left: 3px solid #8b5cf6; }
        .diff-match { background: var(--match-bg); border-left: 3px solid var(--success-green); }

        .diff-type {
            min-width: 80px;
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.75rem;
        }

        .diff-missing .diff-type { color: var(--primary-red); }
        .diff-extra .diff-type { color: var(--warning-yellow); }
        .diff-changed .diff-type { color: #a78bfa; }
        .diff-match .diff-type { color: var(--success-green); }

        .diff-path {
            color: var(--text-gray);
            flex: 1;
        }

        .diff-values {
            color: var(--text-light);
            text-align: right;
        }

        .diff-values .old-value {
            color: var(--primary-red);
            text-decoration: line-through;
            margin-right: 0.5rem;
        }

        .diff-values .new-value {
            color: var(--success-green);
        }

        /* Buttons */
        .btn {
            background: var(--primary-red);
            border: none;
            color: var(--white);
            padding: 0.75rem 1.5rem;
            font-family: 'Rajdhani', sans-serif;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            border-radius: 4px;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn:hover {
            background: var(--accent-red);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(220, 38, 38, 0.3);
        }

        .btn-secondary {
            background: var(--medium-gray);
        }

        .btn-secondary:hover {
            background: var(--light-gray);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .btn-group {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin-top: 1rem;
        }

        /* Info Boxes */
        .info-box {
            background: rgba(220, 38, 38, 0.1);
            border: 1px solid var(--primary-red);
            border-radius: 4px;
            padding: 1rem 1.25rem;
            margin: 1rem 0;
        }

        .info-box.warning {
            background: rgba(234, 179, 8, 0.1);
            border-color: var(--warning-yellow);
        }

        .info-box.success {
            background: rgba(34, 197, 94, 0.1);
            border-color: var(--success-green);
        }

        .info-box-title {
            font-family: 'Orbitron', monospace;
            font-size: 0.9rem;
            color: var(--primary-red);
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .info-box.warning .info-box-title { color: var(--warning-yellow); }
        .info-box.success .info-box-title { color: var(--success-green); }

        /* Learning Objectives */
        .objectives-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .objective-item {
            background: var(--medium-gray);
            border-radius: 4px;
            padding: 1rem;
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            transition: all 0.3s ease;
        }

        .objective-item:hover {
            background: var(--light-gray);
            transform: translateX(5px);
        }

        .objective-number {
            background: var(--primary-red);
            color: var(--white);
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Orbitron', monospace;
            font-size: 0.8rem;
            font-weight: 700;
            flex-shrink: 0;
        }

        .objective-text {
            color: var(--text-light);
            font-size: 0.95rem;
        }

        /* Concept Diagram */
        .concept-diagram {
            background: var(--code-bg);
            border: 1px solid var(--medium-gray);
            border-radius: 4px;
            padding: 2rem;
            margin: 1.5rem 0;
            text-align: center;
        }

        .diagram-flow {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .diagram-box {
            background: var(--medium-gray);
            border: 2px solid var(--primary-red);
            border-radius: 4px;
            padding: 1rem 1.5rem;
            min-width: 150px;
        }

        .diagram-box.golden {
            border-color: var(--success-green);
        }

        .diagram-box.current {
            border-color: var(--warning-yellow);
        }

        .diagram-box.result {
            border-color: #8b5cf6;
            background: rgba(139, 92, 246, 0.1);
        }

        .diagram-label {
            font-family: 'Orbitron', monospace;
            font-size: 0.8rem;
            color: var(--text-gray);
            margin-bottom: 0.5rem;
            text-transform: uppercase;
        }

        .diagram-value {
            font-family: 'Fira Code', monospace;
            font-size: 0.9rem;
            color: var(--text-light);
        }

        .diagram-arrow {
            font-size: 1.5rem;
            color: var(--primary-red);
        }

        /* Exercise Section */
        .exercise-container {
            background: var(--dark-gray);
            border: 2px solid var(--primary-red);
            border-radius: 4px;
            margin: 1.5rem 0;
            overflow: hidden;
        }

        .exercise-header {
            background: linear-gradient(90deg, var(--primary-red), var(--dark-red));
            padding: 1rem 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .exercise-title {
            font-family: 'Orbitron', monospace;
            font-size: 1rem;
            color: var(--white);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .exercise-badge {
            background: var(--black);
            color: var(--primary-red);
            padding: 0.3rem 0.8rem;
            font-family: 'Fira Code', monospace;
            font-size: 0.75rem;
            border-radius: 2px;
        }

        .exercise-content {
            padding: 1.5rem;
        }

        .exercise-task {
            background: var(--code-bg);
            border-left: 3px solid var(--primary-red);
            padding: 1rem;
            margin: 1rem 0;
            font-size: 0.95rem;
        }

        /* Tabs */
        .tabs {
            display: flex;
            border-bottom: 1px solid var(--medium-gray);
            margin-bottom: 1rem;
        }

        .tab-btn {
            background: none;
            border: none;
            color: var(--text-gray);
            padding: 0.75rem 1.5rem;
            font-family: 'Rajdhani', sans-serif;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .tab-btn:hover {
            color: var(--text-light);
        }

        .tab-btn.active {
            color: var(--primary-red);
            border-bottom-color: var(--primary-red);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Scenario Cards */
        .scenario-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 1.5rem;
            margin: 1.5rem 0;
        }

        .scenario-card {
            background: var(--dark-gray);
            border: 1px solid var(--medium-gray);
            border-radius: 4px;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .scenario-card:hover {
            border-color: var(--primary-red);
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .scenario-card.active {
            border-color: var(--primary-red);
            box-shadow: 0 0 20px rgba(220, 38, 38, 0.2);
        }

        .scenario-header {
            background: var(--medium-gray);
            padding: 1rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .scenario-icon {
            font-size: 1.5rem;
        }

        .scenario-title {
            font-family: 'Orbitron', monospace;
            font-size: 0.95rem;
            color: var(--white);
        }

        .scenario-body {
            padding: 1rem;
        }

        .scenario-description {
            color: var(--text-gray);
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }

        /* AI Section Styling */
        .ai-prompt-box {
            background: var(--code-bg);
            border: 1px solid #8b5cf6;
            border-radius: 4px;
            margin: 1rem 0;
            overflow: hidden;
        }

        .ai-prompt-header {
            background: rgba(139, 92, 246, 0.2);
            padding: 0.75rem 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            border-bottom: 1px solid #8b5cf6;
        }

        .ai-prompt-label {
            font-family: 'Orbitron', monospace;
            font-size: 0.85rem;
            color: #a78bfa;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .ai-prompt-content {
            padding: 1rem;
            font-family: 'Fira Code', monospace;
            font-size: 0.85rem;
            color: var(--text-light);
            line-height: 1.6;
        }

        /* Critique Section */
        .critique-container {
            background: var(--dark-gray);
            border: 2px solid var(--warning-yellow);
            border-radius: 4px;
            margin: 1.5rem 0;
            overflow: hidden;
        }

        .critique-header {
            background: rgba(234, 179, 8, 0.2);
            padding: 1rem;
            border-bottom: 1px solid var(--warning-yellow);
        }

        .critique-title {
            font-family: 'Orbitron', monospace;
            font-size: 1rem;
            color: var(--warning-yellow);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .critique-content {
            padding: 1.5rem;
        }

        .critique-question {
            background: var(--code-bg);
            border-left: 3px solid var(--warning-yellow);
            padding: 1rem;
            margin: 1rem 0;
        }

        .critique-options {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            margin-top: 1rem;
        }

        .critique-option {
            background: var(--medium-gray);
            border: 1px solid var(--light-gray);
            border-radius: 4px;
            padding: 0.75rem 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .critique-option:hover {
            border-color: var(--text-gray);
        }

        .critique-option.selected {
            border-color: var(--primary-red);
            background: rgba(220, 38, 38, 0.1);
        }

        .critique-option.correct {
            border-color: var(--success-green);
            background: rgba(34, 197, 94, 0.1);
        }

        .critique-option.incorrect {
            border-color: var(--primary-red);
            background: rgba(220, 38, 38, 0.1);
        }

        .option-marker {
            width: 24px;
            height: 24px;
            border: 2px solid var(--text-gray);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Fira Code', monospace;
            font-size: 0.8rem;
            flex-shrink: 0;
        }

        .critique-option.selected .option-marker,
        .critique-option.correct .option-marker {
            border-color: var(--success-green);
            color: var(--success-green);
        }

        .critique-option.incorrect .option-marker {
            border-color: var(--primary-red);
            color: var(--primary-red);
        }

        .critique-feedback {
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 4px;
            display: none;
        }

        .critique-feedback.show {
            display: block;
        }

        .critique-feedback.correct {
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid var(--success-green);
        }

        .critique-feedback.incorrect {
            background: rgba(220, 38, 38, 0.1);
            border: 1px solid var(--primary-red);
        }

        /* OOP Section */
        .class-diagram {
            background: var(--code-bg);
            border: 2px solid var(--primary-red);
            border-radius: 4px;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }

        .class-name-header {
            background: var(--primary-red);
            color: var(--white);
            padding: 0.75rem 1rem;
            font-family: 'Orbitron', monospace;
            font-size: 1rem;
            text-align: center;
            margin: -1.5rem -1.5rem 1rem -1.5rem;
        }

        .class-section {
            border-bottom: 1px solid var(--medium-gray);
            padding: 1rem 0;
        }

        .class-section:last-child {
            border-bottom: none;
        }

        .class-section-title {
            font-family: 'Fira Code', monospace;
            font-size: 0.8rem;
            color: var(--text-gray);
            text-transform: uppercase;
            margin-bottom: 0.5rem;
        }

        .class-member {
            font-family: 'Fira Code', monospace;
            font-size: 0.85rem;
            color: var(--text-light);
            padding: 0.25rem 0;
        }

        /* Progress Tracker */
        .progress-container {
            background: var(--dark-gray);
            border: 1px solid var(--medium-gray);
            border-radius: 4px;
            padding: 1rem;
            margin-bottom: 1.5rem;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
        }

        .progress-label {
            font-family: 'Orbitron', monospace;
            font-size: 0.85rem;
            color: var(--text-gray);
        }

        .progress-value {
            font-family: 'Fira Code', monospace;
            font-size: 0.9rem;
            color: var(--primary-red);
        }

        .progress-bar {
            height: 8px;
            background: var(--medium-gray);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-red), var(--accent-red));
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        /* Terminal Output */
        .terminal {
            background: var(--black);
            border: 1px solid var(--medium-gray);
            border-radius: 4px;
            overflow: hidden;
            margin: 1rem 0;
        }

        .terminal-header {
            background: var(--medium-gray);
            padding: 0.5rem 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .terminal-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .terminal-dot.red { background: var(--primary-red); }
        .terminal-dot.yellow { background: var(--warning-yellow); }
        .terminal-dot.green { background: var(--success-green); }

        .terminal-body {
            padding: 1rem;
            font-family: 'Fira Code', monospace;
            font-size: 0.85rem;
            color: var(--text-light);
            min-height: 150px;
            max-height: 300px;
            overflow-y: auto;
        }

        .terminal-line {
            margin-bottom: 0.25rem;
        }

        .terminal-prompt {
            color: var(--success-green);
        }

        .terminal-output {
            color: var(--text-gray);
        }

        .terminal-error {
            color: var(--primary-red);
        }

        /* Tables */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
            font-size: 0.9rem;
        }

        .data-table th,
        .data-table td {
            padding: 0.75rem 1rem;
            text-align: left;
            border-bottom: 1px solid var(--medium-gray);
        }

        .data-table th {
            background: var(--medium-gray);
            font-family: 'Orbitron', monospace;
            font-size: 0.8rem;
            color: var(--text-gray);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .data-table tr:hover {
            background: rgba(220, 38, 38, 0.05);
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--dark-gray);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--light-gray);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary-red);
        }

        /* Responsive */
        @media (max-width: 768px) {
            header {
                padding: 1rem;
            }

            h1 {
                font-size: 1.2rem;
            }

            .nav-btn {
                padding: 0.75rem 1rem;
                font-size: 0.85rem;
            }

            main {
                padding: 1rem;
            }

            .section-title {
                font-size: 1.4rem;
            }

            .demo-container {
                grid-template-columns: 1fr;
            }

            .scenario-grid {
                grid-template-columns: 1fr;
            }

            .diff-stats {
                flex-wrap: wrap;
                gap: 0.75rem;
            }
        }

        /* Print Styles */
        @media print {
            .bg-grid, .scanline, nav, .btn-group {
                display: none;
            }

            .section {
                display: block !important;
                page-break-inside: avoid;
            }

            body {
                background: white;
                color: black;
            }

            .card, .code-block, .exercise-container {
                border: 1px solid #ccc;
            }
        }
    </style>
</head>
<body>
    <div class="bg-grid"></div>
    <div class="scanline"></div>

    <header>
        <div class="header-content">
            <div class="logo-section">
                <span class="week-badge">WEEK 10</span>
                <h1>Configuration <span>Drift</span> Checker</h1>
            </div>
            <div class="status-indicator">
                <span class="status-dot"></span>
                <span>DRIFT_DETECTION_ACTIVE</span>
            </div>
        </div>
    </header>

    <nav>
        <div class="nav-container">
            <button class="nav-btn active" data-section="overview">Overview</button>
            <button class="nav-btn" data-section="concepts">Core Concepts</button>
            <button class="nav-btn" data-section="comparing">Comparing JSON</button>
            <button class="nav-btn" data-section="oop">OOP: DriftResult</button>
            <button class="nav-btn" data-section="demo">Interactive Demo</button>
            <button class="nav-btn" data-section="exercises">Exercises</button>
            <button class="nav-btn" data-section="ai-focus">AI Focus</button>
            <button class="nav-btn" data-section="reference">Reference</button>
        </div>
    </nav>

    <main>
        <!-- Overview Section -->
        <section id="overview" class="section active">
            <div class="section-header">
                <h2 class="section-title">Mission Briefing</h2>
                <p class="section-subtitle">Understanding Configuration Drift in Security Operations</p>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon">üéØ</div>
                    <h3 class="card-title">Learning Objectives</h3>
                </div>
                <div class="objectives-grid">
                    <div class="objective-item">
                        <span class="objective-number">1</span>
                        <span class="objective-text">Understand configuration drift and its security implications</span>
                    </div>
                    <div class="objective-item">
                        <span class="objective-number">2</span>
                        <span class="objective-text">Load and parse JSON configuration files in Python</span>
                    </div>
                    <div class="objective-item">
                        <span class="objective-number">3</span>
                        <span class="objective-text">Compare nested JSON structures recursively</span>
                    </div>
                    <div class="objective-item">
                        <span class="objective-number">4</span>
                        <span class="objective-text">Detect missing keys, extra keys, and value mismatches</span>
                    </div>
                    <div class="objective-item">
                        <span class="objective-number">5</span>
                        <span class="objective-text">Create a DriftResult class using basic OOP concepts</span>
                    </div>
                    <div class="objective-item">
                        <span class="objective-number">6</span>
                        <span class="objective-text">Build helper functions for modular, reusable code</span>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon">üîç</div>
                    <h3 class="card-title">What is Configuration Drift?</h3>
                </div>
                <p>Configuration drift occurs when the actual state of a system gradually diverges from its intended (baseline) configuration. In security operations, this can happen due to:</p>
                
                <div class="info-box" style="margin-top: 1rem;">
                    <div class="info-box-title">Common Causes of Drift</div>
                    <ul style="margin-left: 1.5rem; margin-top: 0.5rem;">
                        <li>Manual changes made during incident response</li>
                        <li>Unauthorized modifications by users or attackers</li>
                        <li>Failed or partial automated deployments</li>
                        <li>Software updates that change default settings</li>
                        <li>Human error during maintenance windows</li>
                    </ul>
                </div>

                <div class="concept-diagram">
                    <div class="diagram-flow">
                        <div class="diagram-box golden">
                            <div class="diagram-label">Baseline Config</div>
                            <div class="diagram-value">"Golden" Standard</div>
                        </div>
                        <span class="diagram-arrow">‚ü∑</span>
                        <div class="diagram-box">
                            <div class="diagram-label">Compare</div>
                            <div class="diagram-value">Drift Checker</div>
                        </div>
                        <span class="diagram-arrow">‚ü∑</span>
                        <div class="diagram-box current">
                            <div class="diagram-label">Current Config</div>
                            <div class="diagram-value">Observed State</div>
                        </div>
                        <span class="diagram-arrow">‚Üí</span>
                        <div class="diagram-box result">
                            <div class="diagram-label">Output</div>
                            <div class="diagram-value">Drift Report</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon">üõ°Ô∏è</div>
                    <h3 class="card-title">Security Implications</h3>
                </div>
                <p>Undetected configuration drift can lead to serious security vulnerabilities:</p>
                
                <div class="scenario-grid" style="margin-top: 1rem;">
                    <div class="scenario-card">
                        <div class="scenario-header">
                            <span class="scenario-icon">üî•</span>
                            <span class="scenario-title">Firewall Rules</span>
                        </div>
                        <div class="scenario-body">
                            <p class="scenario-description">A temporary rule added during troubleshooting that opens port 22 to all IPs could remain in place, creating an attack vector.</p>
                        </div>
                    </div>
                    <div class="scenario-card">
                        <div class="scenario-header">
                            <span class="scenario-icon">üë§</span>
                            <span class="scenario-title">IAM Policies</span>
                        </div>
                        <div class="scenario-body">
                            <p class="scenario-description">An overly permissive policy granting admin access might persist after a project ends, violating least privilege.</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="info-box success">
                <div class="info-box-title">Project Deliverable</div>
                <p>By the end of this project, you will build a Python script that loads two JSON configuration files, compares them recursively, and outputs a visual drift report showing all differences.</p>
            </div>
        </section>

        <!-- Core Concepts Section -->
        <section id="concepts" class="section">
            <div class="section-header">
                <h2 class="section-title">Core Concepts</h2>
                <p class="section-subtitle">Understanding JSON Structures and Comparison Types</p>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon">üìÑ</div>
                    <h3 class="card-title">JSON Configuration Files</h3>
                </div>
                <p>Security configurations are commonly stored in JSON format. Let's examine two real-world examples:</p>

                <div class="tabs" style="margin-top: 1rem;">
                    <button class="tab-btn active" data-tab="firewall">Firewall Rules</button>
                    <button class="tab-btn" data-tab="iam">IAM Policy</button>
                </div>

                <div id="firewall" class="tab-content active">
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-label">firewall_baseline.json</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        </div>
                        <div class="code-content">
<pre>{
    <span class="property">"firewall_name"</span>: <span class="string">"prod-web-fw"</span>,
    <span class="property">"default_action"</span>: <span class="string">"deny"</span>,
    <span class="property">"rules"</span>: [
        {
            <span class="property">"name"</span>: <span class="string">"allow-https"</span>,
            <span class="property">"port"</span>: <span class="number">443</span>,
            <span class="property">"protocol"</span>: <span class="string">"tcp"</span>,
            <span class="property">"source"</span>: <span class="string">"0.0.0.0/0"</span>,
            <span class="property">"action"</span>: <span class="string">"allow"</span>,
            <span class="property">"enabled"</span>: <span class="keyword">true</span>
        },
        {
            <span class="property">"name"</span>: <span class="string">"allow-ssh-internal"</span>,
            <span class="property">"port"</span>: <span class="number">22</span>,
            <span class="property">"protocol"</span>: <span class="string">"tcp"</span>,
            <span class="property">"source"</span>: <span class="string">"10.0.0.0/8"</span>,
            <span class="property">"action"</span>: <span class="string">"allow"</span>,
            <span class="property">"enabled"</span>: <span class="keyword">true</span>
        }
    ],
    <span class="property">"logging"</span>: {
        <span class="property">"enabled"</span>: <span class="keyword">true</span>,
        <span class="property">"level"</span>: <span class="string">"info"</span>
    }
}</pre>
                        </div>
                    </div>
                </div>

                <div id="iam" class="tab-content">
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-label">iam_baseline.json</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        </div>
                        <div class="code-content">
<pre>{
    <span class="property">"policy_name"</span>: <span class="string">"developer-access"</span>,
    <span class="property">"version"</span>: <span class="string">"2024-01-01"</span>,
    <span class="property">"statements"</span>: [
        {
            <span class="property">"effect"</span>: <span class="string">"Allow"</span>,
            <span class="property">"actions"</span>: [<span class="string">"s3:GetObject"</span>, <span class="string">"s3:ListBucket"</span>],
            <span class="property">"resources"</span>: [<span class="string">"arn:aws:s3:::dev-bucket/*"</span>]
        },
        {
            <span class="property">"effect"</span>: <span class="string">"Deny"</span>,
            <span class="property">"actions"</span>: [<span class="string">"s3:DeleteBucket"</span>],
            <span class="property">"resources"</span>: [<span class="string">"*"</span>]
        }
    ],
    <span class="property">"conditions"</span>: {
        <span class="property">"mfa_required"</span>: <span class="keyword">true</span>,
        <span class="property">"ip_restriction"</span>: <span class="string">"10.0.0.0/8"</span>
    }
}</pre>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon">üîÑ</div>
                    <h3 class="card-title">Types of Drift</h3>
                </div>
                <p>When comparing configurations, we need to detect three types of differences:</p>

                <table class="data-table" style="margin-top: 1rem;">
                    <thead>
                        <tr>
                            <th>Type</th>
                            <th>Description</th>
                            <th>Security Impact</th>
                            <th>Example</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span class="stat-badge stat-missing">Missing</span></td>
                            <td>Key exists in baseline but not in current</td>
                            <td>Security controls may be disabled</td>
                            <td>Logging configuration removed</td>
                        </tr>
                        <tr>
                            <td><span class="stat-badge stat-extra">Extra</span></td>
                            <td>Key exists in current but not in baseline</td>
                            <td>Unauthorized additions</td>
                            <td>New firewall rule added</td>
                        </tr>
                        <tr>
                            <td><span class="stat-badge stat-changed">Changed</span></td>
                            <td>Key exists in both but values differ</td>
                            <td>Settings modified</td>
                            <td>Port changed from 443 to 8080</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon">üìä</div>
                    <h3 class="card-title">Nested Structure Challenges</h3>
                </div>
                <p>JSON configurations often contain nested structures that require recursive comparison:</p>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-label">Nested Structure Example</span>
                    </div>
                    <div class="code-content">
<pre><span class="comment"># Consider this nested path:</span>
config[<span class="string">"logging"</span>][<span class="string">"level"</span>]

<span class="comment"># The drift path would be reported as:</span>
<span class="string">"logging.level"</span>

<span class="comment"># For lists, we use indices:</span>
config[<span class="string">"rules"</span>][<span class="number">0</span>][<span class="string">"port"</span>]

<span class="comment"># Reported as:</span>
<span class="string">"rules[0].port"</span></pre>
                    </div>
                </div>

                <div class="info-box warning">
                    <div class="info-box-title">Key Insight</div>
                    <p>We need to "walk" through each level of nesting, building a path string as we go. This requires a recursive approach where a function calls itself for each nested dictionary or list it encounters.</p>
                </div>
            </div>
        </section>

        <!-- Comparing JSON Section -->
        <section id="comparing" class="section">
            <div class="section-header">
                <h2 class="section-title">Comparing JSON Structures</h2>
                <p class="section-subtitle">Building a Recursive Comparison Algorithm</p>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon">üìñ</div>
                    <h3 class="card-title">Step 1: Loading JSON Files</h3>
                </div>
                <p>First, we need to load our configuration files into Python dictionaries:</p>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-label">Python - Loading JSON</span>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <div class="code-content">
<pre><span class="keyword">import</span> json

<span class="keyword">def</span> <span class="function">load_config</span>(filepath):
    <span class="string">"""
    Load a JSON configuration file.
    
    Args:
        filepath: Path to the JSON file
        
    Returns:
        dict: Parsed JSON as a Python dictionary
    """</span>
    <span class="keyword">with</span> <span class="function">open</span>(filepath, <span class="string">'r'</span>) <span class="keyword">as</span> file:
        <span class="keyword">return</span> json.<span class="function">load</span>(file)

<span class="comment"># Usage</span>
baseline = <span class="function">load_config</span>(<span class="string">'baseline.json'</span>)
current = <span class="function">load_config</span>(<span class="string">'current.json'</span>)

<span class="function">print</span>(<span class="string">f"Baseline keys: </span>{<span class="function">list</span>(baseline.<span class="function">keys</span>())}<span class="string">"</span>)
<span class="function">print</span>(<span class="string">f"Current keys: </span>{<span class="function">list</span>(current.<span class="function">keys</span>())}<span class="string">"</span>)</pre>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon">üîç</div>
                    <h3 class="card-title">Step 2: Finding Missing and Extra Keys</h3>
                </div>
                <p>Python sets make it easy to find differences between key collections:</p>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-label">Python - Key Comparison</span>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <div class="code-content">
<pre><span class="keyword">def</span> <span class="function">find_key_differences</span>(baseline_dict, current_dict):
    <span class="string">"""
    Find missing and extra keys between two dictionaries.
    
    Args:
        baseline_dict: The expected configuration
        current_dict: The actual configuration
        
    Returns:
        tuple: (missing_keys, extra_keys)
    """</span>
    baseline_keys = <span class="function">set</span>(baseline_dict.<span class="function">keys</span>())
    current_keys = <span class="function">set</span>(current_dict.<span class="function">keys</span>())
    
    <span class="comment"># Keys in baseline but not in current = MISSING</span>
    missing = baseline_keys - current_keys
    
    <span class="comment"># Keys in current but not in baseline = EXTRA</span>
    extra = current_keys - baseline_keys
    
    <span class="keyword">return</span> missing, extra

<span class="comment"># Example usage</span>
baseline = {<span class="string">"port"</span>: <span class="number">443</span>, <span class="string">"enabled"</span>: <span class="keyword">True</span>, <span class="string">"logging"</span>: <span class="keyword">True</span>}
current = {<span class="string">"port"</span>: <span class="number">443</span>, <span class="string">"enabled"</span>: <span class="keyword">True</span>, <span class="string">"debug"</span>: <span class="keyword">True</span>}

missing, extra = <span class="function">find_key_differences</span>(baseline, current)
<span class="function">print</span>(<span class="string">f"Missing: </span>{missing}<span class="string">"</span>)  <span class="comment"># {'logging'}</span>
<span class="function">print</span>(<span class="string">f"Extra: </span>{extra}<span class="string">"</span>)      <span class="comment"># {'debug'}</span></pre>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon">üîÑ</div>
                    <h3 class="card-title">Step 3: Recursive Comparison</h3>
                </div>
                <p>For nested structures, we need a recursive function that calls itself when it encounters nested dictionaries:</p>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-label">Python - Recursive Compare</span>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <div class="code-content">
<pre><span class="keyword">def</span> <span class="function">compare_configs</span>(baseline, current, path=<span class="string">""</span>):
    <span class="string">"""
    Recursively compare two configurations.
    
    Args:
        baseline: Expected configuration (dict or value)
        current: Actual configuration (dict or value)
        path: Current path in the config tree (for reporting)
        
    Returns:
        list: List of difference dictionaries
    """</span>
    differences = []
    
    <span class="comment"># Handle case where both are dictionaries</span>
    <span class="keyword">if</span> <span class="function">isinstance</span>(baseline, <span class="class-name">dict</span>) <span class="keyword">and</span> <span class="function">isinstance</span>(current, <span class="class-name">dict</span>):
        <span class="comment"># Find missing and extra keys</span>
        baseline_keys = <span class="function">set</span>(baseline.<span class="function">keys</span>())
        current_keys = <span class="function">set</span>(current.<span class="function">keys</span>())
        
        <span class="comment"># Report missing keys</span>
        <span class="keyword">for</span> key <span class="keyword">in</span> baseline_keys - current_keys:
            full_path = <span class="string">f"</span>{path}.<span class="string">{key}"</span> <span class="keyword">if</span> path <span class="keyword">else</span> key
            differences.<span class="function">append</span>({
                <span class="string">"type"</span>: <span class="string">"missing"</span>,
                <span class="string">"path"</span>: full_path,
                <span class="string">"baseline_value"</span>: baseline[key],
                <span class="string">"current_value"</span>: <span class="keyword">None</span>
            })
        
        <span class="comment"># Report extra keys</span>
        <span class="keyword">for</span> key <span class="keyword">in</span> current_keys - baseline_keys:
            full_path = <span class="string">f"</span>{path}.<span class="string">{key}"</span> <span class="keyword">if</span> path <span class="keyword">else</span> key
            differences.<span class="function">append</span>({
                <span class="string">"type"</span>: <span class="string">"extra"</span>,
                <span class="string">"path"</span>: full_path,
                <span class="string">"baseline_value"</span>: <span class="keyword">None</span>,
                <span class="string">"current_value"</span>: current[key]
            })
        
        <span class="comment"># Recursively compare common keys</span>
        <span class="keyword">for</span> key <span class="keyword">in</span> baseline_keys & current_keys:
            full_path = <span class="string">f"</span>{path}.<span class="string">{key}"</span> <span class="keyword">if</span> path <span class="keyword">else</span> key
            differences.<span class="function">extend</span>(
                <span class="function">compare_configs</span>(baseline[key], current[key], full_path)
            )
    
    <span class="comment"># Handle case where both are lists</span>
    <span class="keyword">elif</span> <span class="function">isinstance</span>(baseline, <span class="class-name">list</span>) <span class="keyword">and</span> <span class="function">isinstance</span>(current, <span class="class-name">list</span>):
        <span class="comment"># Compare by index</span>
        max_len = <span class="function">max</span>(<span class="function">len</span>(baseline), <span class="function">len</span>(current))
        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="function">range</span>(max_len):
            idx_path = <span class="string">f"</span>{path}<span class="string">[</span>{i}<span class="string">]"</span>
            <span class="keyword">if</span> i >= <span class="function">len</span>(baseline):
                differences.<span class="function">append</span>({
                    <span class="string">"type"</span>: <span class="string">"extra"</span>,
                    <span class="string">"path"</span>: idx_path,
                    <span class="string">"baseline_value"</span>: <span class="keyword">None</span>,
                    <span class="string">"current_value"</span>: current[i]
                })
            <span class="keyword">elif</span> i >= <span class="function">len</span>(current):
                differences.<span class="function">append</span>({
                    <span class="string">"type"</span>: <span class="string">"missing"</span>,
                    <span class="string">"path"</span>: idx_path,
                    <span class="string">"baseline_value"</span>: baseline[i],
                    <span class="string">"current_value"</span>: <span class="keyword">None</span>
                })
            <span class="keyword">else</span>:
                differences.<span class="function">extend</span>(
                    <span class="function">compare_configs</span>(baseline[i], current[i], idx_path)
                )
    
    <span class="comment"># Handle value comparison (leaf nodes)</span>
    <span class="keyword">else</span>:
        <span class="keyword">if</span> baseline != current:
            differences.<span class="function">append</span>({
                <span class="string">"type"</span>: <span class="string">"changed"</span>,
                <span class="string">"path"</span>: path,
                <span class="string">"baseline_value"</span>: baseline,
                <span class="string">"current_value"</span>: current
            })
    
    <span class="keyword">return</span> differences</pre>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon">üìã</div>
                    <h3 class="card-title">Step 4: Display Results</h3>
                </div>
                <p>Create a formatted output for the drift report:</p>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-label">Python - Display Function</span>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <div class="code-content">
<pre><span class="keyword">def</span> <span class="function">display_drift_report</span>(differences):
    <span class="string">"""Display a formatted drift report."""</span>
    <span class="keyword">if</span> <span class="keyword">not</span> differences:
        <span class="function">print</span>(<span class="string">"‚úì No configuration drift detected!"</span>)
        <span class="keyword">return</span>
    
    <span class="function">print</span>(<span class="string">"="</span> * <span class="number">60</span>)
    <span class="function">print</span>(<span class="string">"CONFIGURATION DRIFT REPORT"</span>)
    <span class="function">print</span>(<span class="string">"="</span> * <span class="number">60</span>)
    
    <span class="comment"># Count by type</span>
    counts = {<span class="string">"missing"</span>: <span class="number">0</span>, <span class="string">"extra"</span>: <span class="number">0</span>, <span class="string">"changed"</span>: <span class="number">0</span>}
    <span class="keyword">for</span> diff <span class="keyword">in</span> differences:
        counts[diff[<span class="string">"type"</span>]] += <span class="number">1</span>
    
    <span class="function">print</span>(<span class="string">f"\nSummary:"</span>)
    <span class="function">print</span>(<span class="string">f"  Missing: </span>{counts[<span class="string">'missing'</span>]}<span class="string">"</span>)
    <span class="function">print</span>(<span class="string">f"  Extra:   </span>{counts[<span class="string">'extra'</span>]}<span class="string">"</span>)
    <span class="function">print</span>(<span class="string">f"  Changed: </span>{counts[<span class="string">'changed'</span>]}<span class="string">"</span>)
    <span class="function">print</span>(<span class="string">f"\nDetails:"</span>)
    <span class="function">print</span>(<span class="string">"-"</span> * <span class="number">60</span>)
    
    <span class="keyword">for</span> diff <span class="keyword">in</span> differences:
        type_icon = {
            <span class="string">"missing"</span>: <span class="string">"[-]"</span>,
            <span class="string">"extra"</span>: <span class="string">"[+]"</span>,
            <span class="string">"changed"</span>: <span class="string">"[~]"</span>
        }
        <span class="function">print</span>(<span class="string">f"</span>{type_icon[diff[<span class="string">'type'</span>]]}<span class="string"> </span>{diff[<span class="string">'path'</span>]}<span class="string">"</span>)
        <span class="keyword">if</span> diff[<span class="string">"type"</span>] == <span class="string">"changed"</span>:
            <span class="function">print</span>(<span class="string">f"    Baseline: </span>{diff[<span class="string">'baseline_value'</span>]}<span class="string">"</span>)
            <span class="function">print</span>(<span class="string">f"    Current:  </span>{diff[<span class="string">'current_value'</span>]}<span class="string">"</span>)
        <span class="keyword">elif</span> diff[<span class="string">"type"</span>] == <span class="string">"missing"</span>:
            <span class="function">print</span>(<span class="string">f"    Expected: </span>{diff[<span class="string">'baseline_value'</span>]}<span class="string">"</span>)
        <span class="keyword">else</span>:
            <span class="function">print</span>(<span class="string">f"    Found:    </span>{diff[<span class="string">'current_value'</span>]}<span class="string">"</span>)</pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- OOP Section -->
        <section id="oop" class="section">
            <div class="section-header">
                <h2 class="section-title">OOP: The DriftResult Class</h2>
                <p class="section-subtitle">Introduction to Object-Oriented Programming</p>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon">üéì</div>
                    <h3 class="card-title">Why Use a Class?</h3>
                </div>
                <p>Instead of passing around dictionaries and lists, we can create a custom class to represent our drift results. This provides several benefits:</p>

                <div class="objectives-grid" style="margin-top: 1rem;">
                    <div class="objective-item">
                        <span class="objective-number">1</span>
                        <span class="objective-text"><strong>Organization:</strong> Group related data and functions together</span>
                    </div>
                    <div class="objective-item">
                        <span class="objective-number">2</span>
                        <span class="objective-text"><strong>Readability:</strong> Clear attribute names like <code>result.missing</code></span>
                    </div>
                    <div class="objective-item">
                        <span class="objective-number">3</span>
                        <span class="objective-text"><strong>Methods:</strong> Built-in functions for common operations</span>
                    </div>
                    <div class="objective-item">
                        <span class="objective-number">4</span>
                        <span class="objective-text"><strong>Reusability:</strong> Easy to use across different scripts</span>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon">üìê</div>
                    <h3 class="card-title">DriftResult Class Design</h3>
                </div>

                <div class="class-diagram">
                    <div class="class-name-header">DriftResult</div>
                    <div class="class-section">
                        <div class="class-section-title">Attributes</div>
                        <div class="class-member">+ path: str</div>
                        <div class="class-member">+ drift_type: str</div>
                        <div class="class-member">+ baseline_value: any</div>
                        <div class="class-member">+ current_value: any</div>
                        <div class="class-member">+ severity: str</div>
                    </div>
                    <div class="class-section">
                        <div class="class-section-title">Methods</div>
                        <div class="class-member">+ __init__(path, drift_type, baseline, current)</div>
                        <div class="class-member">+ __str__() ‚Üí str</div>
                        <div class="class-member">+ to_dict() ‚Üí dict</div>
                        <div class="class-member">+ is_critical() ‚Üí bool</div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon">üíª</div>
                    <h3 class="card-title">Implementing the DriftResult Class</h3>
                </div>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-label">Python - DriftResult Class</span>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <div class="code-content">
<pre><span class="keyword">class</span> <span class="class-name">DriftResult</span>:
    <span class="string">"""
    Represents a single configuration drift finding.
    
    This class encapsulates all information about a detected
    difference between baseline and current configurations.
    """</span>
    
    <span class="comment"># Class constant: keywords that indicate critical drift</span>
    CRITICAL_KEYWORDS = [<span class="string">'password'</span>, <span class="string">'secret'</span>, <span class="string">'admin'</span>, <span class="string">'root'</span>, <span class="string">'enabled'</span>]
    
    <span class="keyword">def</span> <span class="function">__init__</span>(self, path, drift_type, baseline_value, current_value):
        <span class="string">"""
        Initialize a DriftResult instance.
        
        Args:
            path: The configuration path where drift was detected
            drift_type: Type of drift ('missing', 'extra', 'changed')
            baseline_value: Expected value from baseline config
            current_value: Actual value from current config
        """</span>
        self.path = path
        self.drift_type = drift_type
        self.baseline_value = baseline_value
        self.current_value = current_value
        self.severity = self.<span class="function">_calculate_severity</span>()
    
    <span class="keyword">def</span> <span class="function">_calculate_severity</span>(self):
        <span class="string">"""Determine severity based on path and drift type."""</span>
        <span class="comment"># Check for critical keywords in the path</span>
        <span class="keyword">for</span> keyword <span class="keyword">in</span> self.CRITICAL_KEYWORDS:
            <span class="keyword">if</span> keyword <span class="keyword">in</span> self.path.lower():
                <span class="keyword">return</span> <span class="string">"high"</span>
        
        <span class="comment"># Missing security configs are concerning</span>
        <span class="keyword">if</span> self.drift_type == <span class="string">"missing"</span>:
            <span class="keyword">return</span> <span class="string">"medium"</span>
        
        <span class="keyword">return</span> <span class="string">"low"</span>
    
    <span class="keyword">def</span> <span class="function">__str__</span>(self):
        <span class="string">"""Return a human-readable string representation."""</span>
        icons = {<span class="string">"missing"</span>: <span class="string">"[-]"</span>, <span class="string">"extra"</span>: <span class="string">"[+]"</span>, <span class="string">"changed"</span>: <span class="string">"[~]"</span>}
        <span class="keyword">return</span> <span class="string">f"</span>{icons.<span class="function">get</span>(self.drift_type, <span class="string">'[?]'</span>)}<span class="string"> </span>{self.path}<span class="string"> (</span>{self.severity}<span class="string">)"</span>
    
    <span class="keyword">def</span> <span class="function">to_dict</span>(self):
        <span class="string">"""Convert to dictionary for JSON serialization."""</span>
        <span class="keyword">return</span> {
            <span class="string">"path"</span>: self.path,
            <span class="string">"type"</span>: self.drift_type,
            <span class="string">"baseline_value"</span>: self.baseline_value,
            <span class="string">"current_value"</span>: self.current_value,
            <span class="string">"severity"</span>: self.severity
        }
    
    <span class="keyword">def</span> <span class="function">is_critical</span>(self):
        <span class="string">"""Check if this drift finding is critical."""</span>
        <span class="keyword">return</span> self.severity == <span class="string">"high"</span></pre>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon">üîß</div>
                    <h3 class="card-title">Using the DriftResult Class</h3>
                </div>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-label">Python - Usage Example</span>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <div class="code-content">
<pre><span class="comment"># Create DriftResult instances instead of dictionaries</span>
result1 = <span class="class-name">DriftResult</span>(
    path=<span class="string">"logging.enabled"</span>,
    drift_type=<span class="string">"changed"</span>,
    baseline_value=<span class="keyword">True</span>,
    current_value=<span class="keyword">False</span>
)

result2 = <span class="class-name">DriftResult</span>(
    path=<span class="string">"admin_password"</span>,
    drift_type=<span class="string">"changed"</span>,
    baseline_value=<span class="string">"***"</span>,
    current_value=<span class="string">"***"</span>
)

<span class="comment"># Use class methods</span>
<span class="function">print</span>(result1)                    <span class="comment"># [~] logging.enabled (high)</span>
<span class="function">print</span>(result1.<span class="function">is_critical</span>())     <span class="comment"># True</span>
<span class="function">print</span>(result2.severity)          <span class="comment"># high</span>

<span class="comment"># Filter critical findings</span>
all_results = [result1, result2]
critical = [r <span class="keyword">for</span> r <span class="keyword">in</span> all_results <span class="keyword">if</span> r.<span class="function">is_critical</span>()]
<span class="function">print</span>(<span class="string">f"Critical findings: </span>{<span class="function">len</span>(critical)}<span class="string">"</span>)</pre>
                    </div>
                </div>
            </div>

            <div class="exercise-container">
                <div class="exercise-header">
                    <span class="exercise-title">üéØ OOP Exercise</span>
                    <span class="exercise-badge">Required</span>
                </div>
                <div class="exercise-content">
                    <p>Modify the <code>compare_configs</code> function to return a list of <code>DriftResult</code> objects instead of dictionaries.</p>
                    
                    <div class="exercise-task">
                        <strong>Task:</strong> Replace this dictionary creation:
                        <div class="code-block" style="margin-top: 0.5rem;">
                            <div class="code-content">
<pre>differences.<span class="function">append</span>({
    <span class="string">"type"</span>: <span class="string">"missing"</span>,
    <span class="string">"path"</span>: full_path,
    <span class="string">"baseline_value"</span>: baseline[key],
    <span class="string">"current_value"</span>: <span class="keyword">None</span>
})</pre>
                            </div>
                        </div>
                        With a DriftResult object:
                        <div class="code-block" style="margin-top: 0.5rem;">
                            <div class="code-content">
<pre>differences.<span class="function">append</span>(<span class="class-name">DriftResult</span>(
    path=full_path,
    drift_type=<span class="string">"missing"</span>,
    baseline_value=baseline[key],
    current_value=<span class="keyword">None</span>
))</pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Interactive Demo Section -->
        <section id="demo" class="section">
            <div class="section-header">
                <h2 class="section-title">Interactive Demo</h2>
                <p class="section-subtitle">See Configuration Drift Detection in Action</p>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon">üéÆ</div>
                    <h3 class="card-title">Choose a Scenario</h3>
                </div>
                <div class="scenario-grid">
                    <div class="scenario-card active" onclick="loadScenario('firewall')">
                        <div class="scenario-header">
                            <span class="scenario-icon">üî•</span>
                            <span class="scenario-title">Firewall Drift</span>
                        </div>
                        <div class="scenario-body">
                            <p class="scenario-description">Detect unauthorized firewall rule changes including opened ports and disabled logging.</p>
                        </div>
                    </div>
                    <div class="scenario-card" onclick="loadScenario('iam')">
                        <div class="scenario-header">
                            <span class="scenario-icon">üë§</span>
                            <span class="scenario-title">IAM Policy Drift</span>
                        </div>
                        <div class="scenario-body">
                            <p class="scenario-description">Find permission changes and policy modifications in cloud IAM configurations.</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="demo-container">
                <div class="json-panel">
                    <div class="panel-header">
                        <span class="panel-title">
                            <span class="baseline-indicator"></span>
                            Baseline Configuration (Golden)
                        </span>
                    </div>
                    <textarea id="baselineJson" class="json-textarea" spellcheck="false"></textarea>
                </div>
                <div class="json-panel">
                    <div class="panel-header">
                        <span class="panel-title">
                            <span class="current-indicator"></span>
                            Current Configuration (Observed)
                        </span>
                    </div>
                    <textarea id="currentJson" class="json-textarea" spellcheck="false"></textarea>
                </div>
            </div>

            <div class="btn-group" style="justify-content: center;">
                <button class="btn" onclick="runComparison()">
                    üîç Run Drift Detection
                </button>
                <button class="btn btn-secondary" onclick="resetDemo()">
                    ‚Ü∫ Reset
                </button>
            </div>

            <div id="diffResults" class="diff-results" style="display: none;">
                <div class="diff-header">
                    <span class="diff-title">Drift Detection Results</span>
                    <div class="diff-stats">
                        <div class="stat-item">
                            <span class="stat-badge stat-missing" id="missingCount">0</span>
                            <span>Missing</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-badge stat-extra" id="extraCount">0</span>
                            <span>Extra</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-badge stat-changed" id="changedCount">0</span>
                            <span>Changed</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-badge stat-match" id="matchCount">0</span>
                            <span>Matched</span>
                        </div>
                    </div>
                </div>
                <div class="diff-content" id="diffContent">
                    <!-- Diff items will be inserted here -->
                </div>
            </div>
        </section>

        <!-- Exercises Section -->
        <section id="exercises" class="section">
            <div class="section-header">
                <h2 class="section-title">Hands-On Exercises</h2>
                <p class="section-subtitle">Practice Building Your Configuration Drift Checker</p>
            </div>

            <div class="progress-container">
                <div class="progress-header">
                    <span class="progress-label">Exercise Progress</span>
                    <span class="progress-value" id="progressValue">0 / 4 Complete</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                </div>
            </div>

            <div class="exercise-container">
                <div class="exercise-header">
                    <span class="exercise-title">Exercise 1: Basic File Loading</span>
                    <span class="exercise-badge">Starter</span>
                </div>
                <div class="exercise-content">
                    <p>Create a Python script that loads two JSON configuration files and prints their contents.</p>
                    
                    <div class="exercise-task">
                        <strong>Requirements:</strong>
                        <ul style="margin-left: 1.5rem; margin-top: 0.5rem;">
                            <li>Create a function <code>load_config(filepath)</code></li>
                            <li>Handle file not found errors gracefully</li>
                            <li>Print the number of top-level keys in each file</li>
                        </ul>
                    </div>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-label">Starter Code</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        </div>
                        <div class="code-content">
<pre><span class="keyword">import</span> json

<span class="keyword">def</span> <span class="function">load_config</span>(filepath):
    <span class="string">"""Load a JSON configuration file."""</span>
    <span class="comment"># TODO: Implement this function</span>
    <span class="comment"># 1. Open the file</span>
    <span class="comment"># 2. Parse JSON content</span>
    <span class="comment"># 3. Return the dictionary</span>
    <span class="comment"># 4. Handle errors appropriately</span>
    <span class="keyword">pass</span>

<span class="comment"># Test your function</span>
<span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:
    baseline = <span class="function">load_config</span>(<span class="string">"baseline.json"</span>)
    current = <span class="function">load_config</span>(<span class="string">"current.json"</span>)
    
    <span class="keyword">if</span> baseline <span class="keyword">and</span> current:
        <span class="function">print</span>(<span class="string">f"Baseline has </span>{<span class="function">len</span>(baseline)}<span class="string"> top-level keys"</span>)
        <span class="function">print</span>(<span class="string">f"Current has </span>{<span class="function">len</span>(current)}<span class="string"> top-level keys"</span>)</pre>
                        </div>
                    </div>

                    <button class="btn btn-secondary" onclick="toggleSolution('ex1')">Show Solution</button>
                    <div id="ex1-solution" class="code-block" style="display: none; margin-top: 1rem;">
                        <div class="code-header">
                            <span class="code-label">Solution</span>
                        </div>
                        <div class="code-content">
<pre><span class="keyword">import</span> json

<span class="keyword">def</span> <span class="function">load_config</span>(filepath):
    <span class="string">"""Load a JSON configuration file."""</span>
    <span class="keyword">try</span>:
        <span class="keyword">with</span> <span class="function">open</span>(filepath, <span class="string">'r'</span>) <span class="keyword">as</span> file:
            <span class="keyword">return</span> json.<span class="function">load</span>(file)
    <span class="keyword">except</span> <span class="class-name">FileNotFoundError</span>:
        <span class="function">print</span>(<span class="string">f"Error: File '</span>{filepath}<span class="string">' not found"</span>)
        <span class="keyword">return</span> <span class="keyword">None</span>
    <span class="keyword">except</span> json.<span class="class-name">JSONDecodeError</span> <span class="keyword">as</span> e:
        <span class="function">print</span>(<span class="string">f"Error: Invalid JSON in '</span>{filepath}<span class="string">': </span>{e}<span class="string">"</span>)
        <span class="keyword">return</span> <span class="keyword">None</span>

<span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:
    baseline = <span class="function">load_config</span>(<span class="string">"baseline.json"</span>)
    current = <span class="function">load_config</span>(<span class="string">"current.json"</span>)
    
    <span class="keyword">if</span> baseline <span class="keyword">and</span> current:
        <span class="function">print</span>(<span class="string">f"Baseline has </span>{<span class="function">len</span>(baseline)}<span class="string"> top-level keys"</span>)
        <span class="function">print</span>(<span class="string">f"Current has </span>{<span class="function">len</span>(current)}<span class="string"> top-level keys"</span>)</pre>
                        </div>
                    </div>
                </div>
            </div>

            <div class="exercise-container">
                <div class="exercise-header">
                    <span class="exercise-title">Exercise 2: Key Difference Detection</span>
                    <span class="exercise-badge">Core</span>
                </div>
                <div class="exercise-content">
                    <p>Build a function that finds missing and extra keys between two dictionaries (non-recursive).</p>
                    
                    <div class="exercise-task">
                        <strong>Requirements:</strong>
                        <ul style="margin-left: 1.5rem; margin-top: 0.5rem;">
                            <li>Create <code>find_missing_keys(baseline, current)</code></li>
                            <li>Create <code>find_extra_keys(baseline, current)</code></li>
                            <li>Use Python sets for efficient comparison</li>
                        </ul>
                    </div>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-label">Starter Code</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        </div>
                        <div class="code-content">
<pre><span class="keyword">def</span> <span class="function">find_missing_keys</span>(baseline, current):
    <span class="string">"""Find keys that exist in baseline but not in current."""</span>
    <span class="comment"># TODO: Use set operations to find missing keys</span>
    <span class="keyword">pass</span>

<span class="keyword">def</span> <span class="function">find_extra_keys</span>(baseline, current):
    <span class="string">"""Find keys that exist in current but not in baseline."""</span>
    <span class="comment"># TODO: Use set operations to find extra keys</span>
    <span class="keyword">pass</span>

<span class="comment"># Test data</span>
baseline = {<span class="string">"firewall"</span>: <span class="keyword">True</span>, <span class="string">"logging"</span>: <span class="keyword">True</span>, <span class="string">"port"</span>: <span class="number">443</span>}
current = {<span class="string">"firewall"</span>: <span class="keyword">True</span>, <span class="string">"port"</span>: <span class="number">443</span>, <span class="string">"debug"</span>: <span class="keyword">True</span>}

<span class="function">print</span>(<span class="string">"Missing:"</span>, <span class="function">find_missing_keys</span>(baseline, current))
<span class="function">print</span>(<span class="string">"Extra:"</span>, <span class="function">find_extra_keys</span>(baseline, current))</pre>
                        </div>
                    </div>

                    <button class="btn btn-secondary" onclick="toggleSolution('ex2')">Show Solution</button>
                    <div id="ex2-solution" class="code-block" style="display: none; margin-top: 1rem;">
                        <div class="code-header">
                            <span class="code-label">Solution</span>
                        </div>
                        <div class="code-content">
<pre><span class="keyword">def</span> <span class="function">find_missing_keys</span>(baseline, current):
    <span class="string">"""Find keys that exist in baseline but not in current."""</span>
    baseline_keys = <span class="function">set</span>(baseline.<span class="function">keys</span>())
    current_keys = <span class="function">set</span>(current.<span class="function">keys</span>())
    <span class="keyword">return</span> baseline_keys - current_keys

<span class="keyword">def</span> <span class="function">find_extra_keys</span>(baseline, current):
    <span class="string">"""Find keys that exist in current but not in baseline."""</span>
    baseline_keys = <span class="function">set</span>(baseline.<span class="function">keys</span>())
    current_keys = <span class="function">set</span>(current.<span class="function">keys</span>())
    <span class="keyword">return</span> current_keys - baseline_keys

<span class="comment"># Test</span>
baseline = {<span class="string">"firewall"</span>: <span class="keyword">True</span>, <span class="string">"logging"</span>: <span class="keyword">True</span>, <span class="string">"port"</span>: <span class="number">443</span>}
current = {<span class="string">"firewall"</span>: <span class="keyword">True</span>, <span class="string">"port"</span>: <span class="number">443</span>, <span class="string">"debug"</span>: <span class="keyword">True</span>}

<span class="function">print</span>(<span class="string">"Missing:"</span>, <span class="function">find_missing_keys</span>(baseline, current))  <span class="comment"># {'logging'}</span>
<span class="function">print</span>(<span class="string">"Extra:"</span>, <span class="function">find_extra_keys</span>(baseline, current))      <span class="comment"># {'debug'}</span></pre>
                        </div>
                    </div>
                </div>
            </div>

            <div class="exercise-container">
                <div class="exercise-header">
                    <span class="exercise-title">Exercise 3: Value Comparison</span>
                    <span class="exercise-badge">Core</span>
                </div>
                <div class="exercise-content">
                    <p>Create a function that compares values for keys that exist in both configurations.</p>
                    
                    <div class="exercise-task">
                        <strong>Requirements:</strong>
                        <ul style="margin-left: 1.5rem; margin-top: 0.5rem;">
                            <li>Find keys common to both configurations</li>
                            <li>Compare their values</li>
                            <li>Return a list of changed items with old and new values</li>
                        </ul>
                    </div>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-label">Starter Code</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        </div>
                        <div class="code-content">
<pre><span class="keyword">def</span> <span class="function">find_changed_values</span>(baseline, current):
    <span class="string">"""Find keys where values differ between configs."""</span>
    changes = []
    
    <span class="comment"># TODO: Find common keys</span>
    <span class="comment"># TODO: Compare values for each common key</span>
    <span class="comment"># TODO: Add to changes list if different</span>
    
    <span class="keyword">return</span> changes

<span class="comment"># Test</span>
baseline = {<span class="string">"port"</span>: <span class="number">443</span>, <span class="string">"enabled"</span>: <span class="keyword">True</span>, <span class="string">"protocol"</span>: <span class="string">"tcp"</span>}
current = {<span class="string">"port"</span>: <span class="number">8080</span>, <span class="string">"enabled"</span>: <span class="keyword">False</span>, <span class="string">"protocol"</span>: <span class="string">"tcp"</span>}

<span class="keyword">for</span> change <span class="keyword">in</span> <span class="function">find_changed_values</span>(baseline, current):
    <span class="function">print</span>(change)</pre>
                        </div>
                    </div>

                    <button class="btn btn-secondary" onclick="toggleSolution('ex3')">Show Solution</button>
                    <div id="ex3-solution" class="code-block" style="display: none; margin-top: 1rem;">
                        <div class="code-header">
                            <span class="code-label">Solution</span>
                        </div>
                        <div class="code-content">
<pre><span class="keyword">def</span> <span class="function">find_changed_values</span>(baseline, current):
    <span class="string">"""Find keys where values differ between configs."""</span>
    changes = []
    
    <span class="comment"># Find common keys using set intersection</span>
    common_keys = <span class="function">set</span>(baseline.<span class="function">keys</span>()) & <span class="function">set</span>(current.<span class="function">keys</span>())
    
    <span class="keyword">for</span> key <span class="keyword">in</span> common_keys:
        <span class="keyword">if</span> baseline[key] != current[key]:
            changes.<span class="function">append</span>({
                <span class="string">"key"</span>: key,
                <span class="string">"baseline"</span>: baseline[key],
                <span class="string">"current"</span>: current[key]
            })
    
    <span class="keyword">return</span> changes

<span class="comment"># Test</span>
baseline = {<span class="string">"port"</span>: <span class="number">443</span>, <span class="string">"enabled"</span>: <span class="keyword">True</span>, <span class="string">"protocol"</span>: <span class="string">"tcp"</span>}
current = {<span class="string">"port"</span>: <span class="number">8080</span>, <span class="string">"enabled"</span>: <span class="keyword">False</span>, <span class="string">"protocol"</span>: <span class="string">"tcp"</span>}

<span class="keyword">for</span> change <span class="keyword">in</span> <span class="function">find_changed_values</span>(baseline, current):
    <span class="function">print</span>(<span class="string">f"</span>{change[<span class="string">'key'</span>]}<span class="string">: </span>{change[<span class="string">'baseline'</span>]}<span class="string"> ‚Üí </span>{change[<span class="string">'current'</span>]}<span class="string">"</span>)
<span class="comment"># Output:</span>
<span class="comment"># port: 443 ‚Üí 8080</span>
<span class="comment"># enabled: True ‚Üí False</span></pre>
                        </div>
                    </div>
                </div>
            </div>

            <div class="exercise-container">
                <div class="exercise-header">
                    <span class="exercise-title">Exercise 4: Complete Drift Checker</span>
                    <span class="exercise-badge">Integration</span>
                </div>
                <div class="exercise-content">
                    <p>Combine all components to build a complete configuration drift checker using the DriftResult class.</p>
                    
                    <div class="exercise-task">
                        <strong>Requirements:</strong>
                        <ul style="margin-left: 1.5rem; margin-top: 0.5rem;">
                            <li>Implement the full recursive <code>compare_configs</code> function</li>
                            <li>Use the <code>DriftResult</code> class for all findings</li>
                            <li>Create a summary report showing counts by type and severity</li>
                            <li>Test with the provided firewall configuration files</li>
                        </ul>
                    </div>

                    <div class="info-box">
                        <div class="info-box-title">Hint</div>
                        <p>Start by combining your solutions from Exercises 1-3, then add recursion for nested dictionaries. Remember to track the path as you descend into nested structures.</p>
                    </div>

                    <button class="btn btn-secondary" onclick="toggleSolution('ex4')">Show Solution</button>
                    <div id="ex4-solution" class="code-block" style="display: none; margin-top: 1rem;">
                        <div class="code-header">
                            <span class="code-label">Complete Solution</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        </div>
                        <div class="code-content">
<pre><span class="keyword">import</span> json

<span class="keyword">class</span> <span class="class-name">DriftResult</span>:
    <span class="string">"""Represents a single configuration drift finding."""</span>
    CRITICAL_KEYWORDS = [<span class="string">'password'</span>, <span class="string">'secret'</span>, <span class="string">'admin'</span>, <span class="string">'root'</span>, <span class="string">'enabled'</span>]
    
    <span class="keyword">def</span> <span class="function">__init__</span>(self, path, drift_type, baseline_value, current_value):
        self.path = path
        self.drift_type = drift_type
        self.baseline_value = baseline_value
        self.current_value = current_value
        self.severity = self.<span class="function">_calculate_severity</span>()
    
    <span class="keyword">def</span> <span class="function">_calculate_severity</span>(self):
        <span class="keyword">for</span> keyword <span class="keyword">in</span> self.CRITICAL_KEYWORDS:
            <span class="keyword">if</span> keyword <span class="keyword">in</span> self.path.lower():
                <span class="keyword">return</span> <span class="string">"high"</span>
        <span class="keyword">if</span> self.drift_type == <span class="string">"missing"</span>:
            <span class="keyword">return</span> <span class="string">"medium"</span>
        <span class="keyword">return</span> <span class="string">"low"</span>
    
    <span class="keyword">def</span> <span class="function">__str__</span>(self):
        icons = {<span class="string">"missing"</span>: <span class="string">"[-]"</span>, <span class="string">"extra"</span>: <span class="string">"[+]"</span>, <span class="string">"changed"</span>: <span class="string">"[~]"</span>}
        <span class="keyword">return</span> <span class="string">f"</span>{icons.<span class="function">get</span>(self.drift_type, <span class="string">'[?]'</span>)}<span class="string"> </span>{self.path}<span class="string"> (</span>{self.severity}<span class="string">)"</span>

<span class="keyword">def</span> <span class="function">load_config</span>(filepath):
    <span class="keyword">try</span>:
        <span class="keyword">with</span> <span class="function">open</span>(filepath, <span class="string">'r'</span>) <span class="keyword">as</span> f:
            <span class="keyword">return</span> json.<span class="function">load</span>(f)
    <span class="keyword">except</span> (<span class="class-name">FileNotFoundError</span>, json.<span class="class-name">JSONDecodeError</span>) <span class="keyword">as</span> e:
        <span class="function">print</span>(<span class="string">f"Error loading </span>{filepath}<span class="string">: </span>{e}<span class="string">"</span>)
        <span class="keyword">return</span> <span class="keyword">None</span>

<span class="keyword">def</span> <span class="function">compare_configs</span>(baseline, current, path=<span class="string">""</span>):
    <span class="string">"""Recursively compare configurations."""</span>
    results = []
    
    <span class="keyword">if</span> <span class="function">isinstance</span>(baseline, <span class="class-name">dict</span>) <span class="keyword">and</span> <span class="function">isinstance</span>(current, <span class="class-name">dict</span>):
        base_keys = <span class="function">set</span>(baseline.<span class="function">keys</span>())
        curr_keys = <span class="function">set</span>(current.<span class="function">keys</span>())
        
        <span class="keyword">for</span> key <span class="keyword">in</span> base_keys - curr_keys:
            full_path = <span class="string">f"</span>{path}.<span class="string">{key}"</span> <span class="keyword">if</span> path <span class="keyword">else</span> key
            results.<span class="function">append</span>(<span class="class-name">DriftResult</span>(full_path, <span class="string">"missing"</span>, baseline[key], <span class="keyword">None</span>))
        
        <span class="keyword">for</span> key <span class="keyword">in</span> curr_keys - base_keys:
            full_path = <span class="string">f"</span>{path}.<span class="string">{key}"</span> <span class="keyword">if</span> path <span class="keyword">else</span> key
            results.<span class="function">append</span>(<span class="class-name">DriftResult</span>(full_path, <span class="string">"extra"</span>, <span class="keyword">None</span>, current[key]))
        
        <span class="keyword">for</span> key <span class="keyword">in</span> base_keys & curr_keys:
            full_path = <span class="string">f"</span>{path}.<span class="string">{key}"</span> <span class="keyword">if</span> path <span class="keyword">else</span> key
            results.<span class="function">extend</span>(<span class="function">compare_configs</span>(baseline[key], current[key], full_path))
    
    <span class="keyword">elif</span> <span class="function">isinstance</span>(baseline, <span class="class-name">list</span>) <span class="keyword">and</span> <span class="function">isinstance</span>(current, <span class="class-name">list</span>):
        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="function">range</span>(<span class="function">max</span>(<span class="function">len</span>(baseline), <span class="function">len</span>(current))):
            idx_path = <span class="string">f"</span>{path}<span class="string">[</span>{i}<span class="string">]"</span>
            <span class="keyword">if</span> i >= <span class="function">len</span>(baseline):
                results.<span class="function">append</span>(<span class="class-name">DriftResult</span>(idx_path, <span class="string">"extra"</span>, <span class="keyword">None</span>, current[i]))
            <span class="keyword">elif</span> i >= <span class="function">len</span>(current):
                results.<span class="function">append</span>(<span class="class-name">DriftResult</span>(idx_path, <span class="string">"missing"</span>, baseline[i], <span class="keyword">None</span>))
            <span class="keyword">else</span>:
                results.<span class="function">extend</span>(<span class="function">compare_configs</span>(baseline[i], current[i], idx_path))
    <span class="keyword">else</span>:
        <span class="keyword">if</span> baseline != current:
            results.<span class="function">append</span>(<span class="class-name">DriftResult</span>(path, <span class="string">"changed"</span>, baseline, current))
    
    <span class="keyword">return</span> results

<span class="keyword">def</span> <span class="function">print_report</span>(results):
    <span class="function">print</span>(<span class="string">"="</span> * <span class="number">50</span>)
    <span class="function">print</span>(<span class="string">"CONFIGURATION DRIFT REPORT"</span>)
    <span class="function">print</span>(<span class="string">"="</span> * <span class="number">50</span>)
    
    counts = {<span class="string">"missing"</span>: <span class="number">0</span>, <span class="string">"extra"</span>: <span class="number">0</span>, <span class="string">"changed"</span>: <span class="number">0</span>}
    severity_counts = {<span class="string">"high"</span>: <span class="number">0</span>, <span class="string">"medium"</span>: <span class="number">0</span>, <span class="string">"low"</span>: <span class="number">0</span>}
    
    <span class="keyword">for</span> r <span class="keyword">in</span> results:
        counts[r.drift_type] += <span class="number">1</span>
        severity_counts[r.severity] += <span class="number">1</span>
    
    <span class="function">print</span>(<span class="string">f"\nBy Type: Missing={counts['missing']}, Extra={counts['extra']}, Changed={counts['changed']}"</span>)
    <span class="function">print</span>(<span class="string">f"By Severity: High={severity_counts['high']}, Medium={severity_counts['medium']}, Low={severity_counts['low']}\n"</span>)
    
    <span class="keyword">for</span> r <span class="keyword">in</span> results:
        <span class="function">print</span>(r)

<span class="comment"># Main execution</span>
baseline = <span class="function">load_config</span>(<span class="string">"baseline.json"</span>)
current = <span class="function">load_config</span>(<span class="string">"current.json"</span>)

<span class="keyword">if</span> baseline <span class="keyword">and</span> current:
    results = <span class="function">compare_configs</span>(baseline, current)
    <span class="function">print_report</span>(results)</pre>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- AI Focus Section -->
        <section id="ai-focus" class="section">
            <div class="section-header">
                <h2 class="section-title">AI-Assisted Development</h2>
                <p class="section-subtitle">Using AI Tools Effectively for Configuration Comparison</p>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon">ü§ñ</div>
                    <h3 class="card-title">AI Prompting Strategies</h3>
                </div>
                <p>When working with AI assistants like GitHub Copilot or ChatGPT, effective prompts lead to better code. Here are pre-written prompts you can use:</p>

                <div class="ai-prompt-box">
                    <div class="ai-prompt-header">
                        <span class="ai-prompt-label">üìù Prompt 1: Designing Comparison Logic</span>
                    </div>
                    <div class="ai-prompt-content">
I need to compare two JSON configuration files in Python to detect configuration drift. The configurations can be nested with dictionaries and lists. I need to detect:
1. Keys missing from the current config that exist in baseline
2. Extra keys in current that don't exist in baseline  
3. Values that have changed between baseline and current

Please help me design a recursive comparison function. Show me the function signature and explain the recursive strategy before writing code.
                    </div>
                </div>

                <div class="ai-prompt-box">
                    <div class="ai-prompt-header">
                        <span class="ai-prompt-label">üìù Prompt 2: Refactoring to Helpers</span>
                    </div>
                    <div class="ai-prompt-content">
I have a large compare_configs() function that does everything in one place. Can you help me refactor it into smaller, focused helper functions? I want:
- A function to find missing keys
- A function to find extra keys  
- A function to compare values
- A main function that orchestrates these helpers

Here's my current function:
[paste your code here]

Please show the refactored version with each helper function clearly documented.
                    </div>
                </div>

                <div class="ai-prompt-box">
                    <div class="ai-prompt-header">
                        <span class="ai-prompt-label">üìù Prompt 3: Path Tracking</span>
                    </div>
                    <div class="ai-prompt-content">
In my configuration drift checker, I need to track the path through nested JSON so I can report exactly where differences occur. For example, if the config is:
{"logging": {"level": "info"}}

And logging.level changed, I want to report "logging.level" as the path.

How should I build this path string as I recurse through dictionaries and lists? Show me examples for both dict keys and list indices.
                    </div>
                </div>
            </div>

            <div class="critique-container">
                <div class="critique-header">
                    <h3 class="critique-title">‚ö†Ô∏è Critique the AI: Code Review Exercise</h3>
                </div>
                <div class="critique-content">
                    <p>An AI assistant generated the following code to compare configurations. Review it and identify the issues:</p>

                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-label">AI-Generated Code</span>
                        </div>
                        <div class="code-content">
<pre><span class="keyword">def</span> <span class="function">compare</span>(base, curr):
    diffs = []
    <span class="keyword">for</span> key <span class="keyword">in</span> base:
        <span class="keyword">if</span> key <span class="keyword">not</span> <span class="keyword">in</span> curr:
            diffs.<span class="function">append</span>(<span class="string">f"Missing: </span>{key}<span class="string">"</span>)
        <span class="keyword">elif</span> base[key] != curr[key]:
            diffs.<span class="function">append</span>(<span class="string">f"Changed: </span>{key}<span class="string">"</span>)
    <span class="keyword">return</span> diffs</pre>
                        </div>
                    </div>

                    <div class="critique-question">
                        <strong>Question:</strong> What is the PRIMARY issue with this AI-generated code for a configuration drift checker?
                    </div>

                    <div class="critique-options" id="critiqueOptions">
                        <div class="critique-option" onclick="selectCritiqueOption(this, 'A')">
                            <span class="option-marker">A</span>
                            <span>The function name is too short and unclear</span>
                        </div>
                        <div class="critique-option" onclick="selectCritiqueOption(this, 'B')">
                            <span class="option-marker">B</span>
                            <span>It doesn't detect extra keys in the current config</span>
                        </div>
                        <div class="critique-option" onclick="selectCritiqueOption(this, 'C')">
                            <span class="option-marker">C</span>
                            <span>It doesn't handle nested structures recursively</span>
                        </div>
                        <div class="critique-option" onclick="selectCritiqueOption(this, 'D')">
                            <span class="option-marker">D</span>
                            <span>It uses a list instead of a set for differences</span>
                        </div>
                    </div>

                    <button class="btn" onclick="checkCritiqueAnswer()" style="margin-top: 1rem;">Check Answer</button>

                    <div id="critiqueFeedback" class="critique-feedback">
                        <!-- Feedback will be inserted here -->
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon">üí°</div>
                    <h3 class="card-title">Best Practices for AI-Assisted Coding</h3>
                </div>

                <div class="objectives-grid">
                    <div class="objective-item">
                        <span class="objective-number">1</span>
                        <span class="objective-text"><strong>Verify Output:</strong> Always test AI-generated code with edge cases</span>
                    </div>
                    <div class="objective-item">
                        <span class="objective-number">2</span>
                        <span class="objective-text"><strong>Understand First:</strong> Don't use code you don't understand</span>
                    </div>
                    <div class="objective-item">
                        <span class="objective-number">3</span>
                        <span class="objective-text"><strong>Iterate:</strong> Ask follow-up questions to refine solutions</span>
                    </div>
                    <div class="objective-item">
                        <span class="objective-number">4</span>
                        <span class="objective-text"><strong>Security Review:</strong> Check for vulnerabilities in generated code</span>
                    </div>
                </div>

                <div class="info-box warning" style="margin-top: 1rem;">
                    <div class="info-box-title">Important Reminder</div>
                    <p>AI assistants can generate incorrect or insecure code. In cybersecurity work, always manually review AI suggestions before using them in production systems.</p>
                </div>
            </div>
        </section>

        <!-- Reference Section -->
        <section id="reference" class="section">
            <div class="section-header">
                <h2 class="section-title">Quick Reference</h2>
                <p class="section-subtitle">Key Concepts and Code Patterns</p>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon">üìö</div>
                    <h3 class="card-title">Python JSON Module</h3>
                </div>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-label">Essential JSON Operations</span>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <div class="code-content">
<pre><span class="keyword">import</span> json

<span class="comment"># Load JSON from file</span>
<span class="keyword">with</span> <span class="function">open</span>(<span class="string">'config.json'</span>, <span class="string">'r'</span>) <span class="keyword">as</span> f:
    data = json.<span class="function">load</span>(f)

<span class="comment"># Parse JSON string</span>
json_string = <span class="string">'{"key": "value"}'</span>
data = json.<span class="function">loads</span>(json_string)

<span class="comment"># Write JSON to file</span>
<span class="keyword">with</span> <span class="function">open</span>(<span class="string">'output.json'</span>, <span class="string">'w'</span>) <span class="keyword">as</span> f:
    json.<span class="function">dump</span>(data, f, indent=<span class="number">2</span>)

<span class="comment"># Convert to JSON string</span>
json_str = json.<span class="function">dumps</span>(data, indent=<span class="number">2</span>)</pre>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon">üî¢</div>
                    <h3 class="card-title">Set Operations</h3>
                </div>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-label">Set Operations for Key Comparison</span>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <div class="code-content">
<pre>a = {<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>}
b = {<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>}

<span class="comment"># Difference: items in a but not in b</span>
a - b                    <span class="comment"># {1}</span>

<span class="comment"># Intersection: items in both</span>
a & b                    <span class="comment"># {2, 3}</span>

<span class="comment"># Union: all items</span>
a | b                    <span class="comment"># {1, 2, 3, 4}</span>

<span class="comment"># Symmetric difference: items in one but not both</span>
a ^ b                    <span class="comment"># {1, 4}</span>

<span class="comment"># Get set of dictionary keys</span>
keys = <span class="function">set</span>(my_dict.<span class="function">keys</span>())</pre>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon">üîÑ</div>
                    <h3 class="card-title">Recursion Pattern</h3>
                </div>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-label">Basic Recursive Pattern</span>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <div class="code-content">
<pre><span class="keyword">def</span> <span class="function">recursive_function</span>(data, path=<span class="string">""</span>):
    results = []
    
    <span class="comment"># Base case: handle non-container types</span>
    <span class="keyword">if</span> <span class="keyword">not</span> <span class="function">isinstance</span>(data, (<span class="class-name">dict</span>, <span class="class-name">list</span>)):
        <span class="comment"># Process the leaf value</span>
        <span class="keyword">return</span> [<span class="function">process</span>(data, path)]
    
    <span class="comment"># Recursive case: dictionary</span>
    <span class="keyword">if</span> <span class="function">isinstance</span>(data, <span class="class-name">dict</span>):
        <span class="keyword">for</span> key, value <span class="keyword">in</span> data.<span class="function">items</span>():
            new_path = <span class="string">f"</span>{path}.<span class="string">{key}"</span> <span class="keyword">if</span> path <span class="keyword">else</span> key
            results.<span class="function">extend</span>(<span class="function">recursive_function</span>(value, new_path))
    
    <span class="comment"># Recursive case: list</span>
    <span class="keyword">elif</span> <span class="function">isinstance</span>(data, <span class="class-name">list</span>):
        <span class="keyword">for</span> i, item <span class="keyword">in</span> <span class="function">enumerate</span>(data):
            new_path = <span class="string">f"</span>{path}<span class="string">[</span>{i}<span class="string">]"</span>
            results.<span class="function">extend</span>(<span class="function">recursive_function</span>(item, new_path))
    
    <span class="keyword">return</span> results</pre>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon">üèóÔ∏è</div>
                    <h3 class="card-title">Class Definition Pattern</h3>
                </div>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-label">Basic Class Structure</span>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <div class="code-content">
<pre><span class="keyword">class</span> <span class="class-name">MyClass</span>:
    <span class="string">"""Class docstring describing purpose."""</span>
    
    <span class="comment"># Class attribute (shared by all instances)</span>
    class_variable = <span class="string">"shared value"</span>
    
    <span class="keyword">def</span> <span class="function">__init__</span>(self, param1, param2):
        <span class="string">"""Initialize instance attributes."""</span>
        <span class="comment"># Instance attributes (unique to each instance)</span>
        self.param1 = param1
        self.param2 = param2
        self._private = self.<span class="function">_compute</span>()
    
    <span class="keyword">def</span> <span class="function">_compute</span>(self):
        <span class="string">"""Private helper method (by convention)."""</span>
        <span class="keyword">return</span> self.param1 + self.param2
    
    <span class="keyword">def</span> <span class="function">__str__</span>(self):
        <span class="string">"""Human-readable string representation."""</span>
        <span class="keyword">return</span> <span class="string">f"MyClass(</span>{self.param1}<span class="string">, </span>{self.param2}<span class="string">)"</span>
    
    <span class="keyword">def</span> <span class="function">to_dict</span>(self):
        <span class="string">"""Convert to dictionary."""</span>
        <span class="keyword">return</span> {<span class="string">"param1"</span>: self.param1, <span class="string">"param2"</span>: self.param2}</pre>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon">üìÑ</div>
                    <h3 class="card-title">Sample Configuration Files</h3>
                </div>

                <div class="tabs">
                    <button class="tab-btn active" data-tab="sample-baseline">baseline.json</button>
                    <button class="tab-btn" data-tab="sample-current">current.json</button>
                </div>

                <div id="sample-baseline" class="tab-content active">
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-label">baseline.json</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        </div>
                        <div class="code-content">
<pre>{
    "firewall_name": "prod-web-fw",
    "default_action": "deny",
    "rules": [
        {
            "name": "allow-https",
            "port": 443,
            "protocol": "tcp",
            "source": "0.0.0.0/0",
            "action": "allow",
            "enabled": true
        },
        {
            "name": "allow-ssh-internal",
            "port": 22,
            "protocol": "tcp",
            "source": "10.0.0.0/8",
            "action": "allow",
            "enabled": true
        }
    ],
    "logging": {
        "enabled": true,
        "level": "info",
        "destination": "siem"
    }
}</pre>
                        </div>
                    </div>
                </div>

                <div id="sample-current" class="tab-content">
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-label">current.json</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        </div>
                        <div class="code-content">
<pre>{
    "firewall_name": "prod-web-fw",
    "default_action": "deny",
    "rules": [
        {
            "name": "allow-https",
            "port": 8080,
            "protocol": "tcp",
            "source": "0.0.0.0/0",
            "action": "allow",
            "enabled": true
        },
        {
            "name": "allow-ssh-internal",
            "port": 22,
            "protocol": "tcp",
            "source": "0.0.0.0/0",
            "action": "allow",
            "enabled": true
        },
        {
            "name": "temp-debug",
            "port": 9999,
            "protocol": "tcp",
            "source": "0.0.0.0/0",
            "action": "allow",
            "enabled": true
        }
    ],
    "logging": {
        "enabled": false,
        "level": "debug"
    }
}</pre>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script>
        // Sample data for scenarios
        const scenarios = {
            firewall: {
                baseline: {
                    "firewall_name": "prod-web-fw",
                    "default_action": "deny",
                    "rules": [
                        {
                            "name": "allow-https",
                            "port": 443,
                            "protocol": "tcp",
                            "source": "0.0.0.0/0",
                            "action": "allow",
                            "enabled": true
                        },
                        {
                            "name": "allow-ssh-internal",
                            "port": 22,
                            "protocol": "tcp",
                            "source": "10.0.0.0/8",
                            "action": "allow",
                            "enabled": true
                        }
                    ],
                    "logging": {
                        "enabled": true,
                        "level": "info",
                        "destination": "siem"
                    }
                },
                current: {
                    "firewall_name": "prod-web-fw",
                    "default_action": "deny",
                    "rules": [
                        {
                            "name": "allow-https",
                            "port": 8080,
                            "protocol": "tcp",
                            "source": "0.0.0.0/0",
                            "action": "allow",
                            "enabled": true
                        },
                        {
                            "name": "allow-ssh-internal",
                            "port": 22,
                            "protocol": "tcp",
                            "source": "0.0.0.0/0",
                            "action": "allow",
                            "enabled": true
                        },
                        {
                            "name": "temp-debug",
                            "port": 9999,
                            "protocol": "tcp",
                            "source": "0.0.0.0/0",
                            "action": "allow",
                            "enabled": true
                        }
                    ],
                    "logging": {
                        "enabled": false,
                        "level": "debug"
                    }
                }
            },
            iam: {
                baseline: {
                    "policy_name": "developer-access",
                    "version": "2024-01-01",
                    "statements": [
                        {
                            "effect": "Allow",
                            "actions": ["s3:GetObject", "s3:ListBucket"],
                            "resources": ["arn:aws:s3:::dev-bucket/*"]
                        },
                        {
                            "effect": "Deny",
                            "actions": ["s3:DeleteBucket"],
                            "resources": ["*"]
                        }
                    ],
                    "conditions": {
                        "mfa_required": true,
                        "ip_restriction": "10.0.0.0/8"
                    }
                },
                current: {
                    "policy_name": "developer-access",
                    "version": "2024-03-15",
                    "statements": [
                        {
                            "effect": "Allow",
                            "actions": ["s3:GetObject", "s3:ListBucket", "s3:PutObject", "s3:DeleteObject"],
                            "resources": ["arn:aws:s3:::dev-bucket/*", "arn:aws:s3:::prod-bucket/*"]
                        }
                    ],
                    "conditions": {
                        "mfa_required": false,
                        "ip_restriction": "0.0.0.0/0",
                        "session_duration": 43200
                    }
                }
            }
        };

        // Navigation
        document.querySelectorAll('.nav-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const sectionId = this.dataset.section;
                
                // Update nav buttons
                document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                
                // Update sections
                document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
                document.getElementById(sectionId).classList.add('active');
            });
        });

        // Tabs
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const tabId = this.dataset.tab;
                const tabContainer = this.closest('.card') || this.closest('.section');
                
                // Update tab buttons within this container
                tabContainer.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                
                // Update tab content within this container
                tabContainer.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                tabContainer.querySelector(`#${tabId}`).classList.add('active');
            });
        });

        // Load scenario
        function loadScenario(scenarioName) {
            const scenario = scenarios[scenarioName];
            
            // Update UI
            document.querySelectorAll('.scenario-card').forEach(card => card.classList.remove('active'));
            event.currentTarget.classList.add('active');
            
            // Load JSON into textareas
            document.getElementById('baselineJson').value = JSON.stringify(scenario.baseline, null, 2);
            document.getElementById('currentJson').value = JSON.stringify(scenario.current, null, 2);
            
            // Hide results
            document.getElementById('diffResults').style.display = 'none';
        }

        // Initialize demo with firewall scenario
        loadScenario('firewall');

        // Compare configurations
        function compareConfigs(baseline, current, path = '') {
            const differences = [];
            let matchCount = 0;

            if (typeof baseline === 'object' && baseline !== null && 
                typeof current === 'object' && current !== null) {
                
                if (Array.isArray(baseline) && Array.isArray(current)) {
                    // Compare arrays
                    const maxLen = Math.max(baseline.length, current.length);
                    for (let i = 0; i < maxLen; i++) {
                        const idxPath = `${path}[${i}]`;
                        if (i >= baseline.length) {
                            differences.push({
                                type: 'extra',
                                path: idxPath,
                                baselineValue: null,
                                currentValue: current[i]
                            });
                        } else if (i >= current.length) {
                            differences.push({
                                type: 'missing',
                                path: idxPath,
                                baselineValue: baseline[i],
                                currentValue: null
                            });
                        } else {
                            const nested = compareConfigs(baseline[i], current[i], idxPath);
                            differences.push(...nested.differences);
                            matchCount += nested.matchCount;
                        }
                    }
                } else {
                    // Compare objects
                    const baseKeys = new Set(Object.keys(baseline));
                    const currKeys = new Set(Object.keys(current));

                    // Missing keys
                    for (const key of baseKeys) {
                        if (!currKeys.has(key)) {
                            const fullPath = path ? `${path}.${key}` : key;
                            differences.push({
                                type: 'missing',
                                path: fullPath,
                                baselineValue: baseline[key],
                                currentValue: null
                            });
                        }
                    }

                    // Extra keys
                    for (const key of currKeys) {
                        if (!baseKeys.has(key)) {
                            const fullPath = path ? `${path}.${key}` : key;
                            differences.push({
                                type: 'extra',
                                path: fullPath,
                                baselineValue: null,
                                currentValue: current[key]
                            });
                        }
                    }

                    // Common keys - recurse
                    for (const key of baseKeys) {
                        if (currKeys.has(key)) {
                            const fullPath = path ? `${path}.${key}` : key;
                            const nested = compareConfigs(baseline[key], current[key], fullPath);
                            differences.push(...nested.differences);
                            matchCount += nested.matchCount;
                        }
                    }
                }
            } else {
                // Leaf comparison
                if (baseline !== current) {
                    differences.push({
                        type: 'changed',
                        path: path,
                        baselineValue: baseline,
                        currentValue: current
                    });
                } else {
                    matchCount++;
                }
            }

            return { differences, matchCount };
        }

        // Run comparison
        function runComparison() {
            const baselineText = document.getElementById('baselineJson').value;
            const currentText = document.getElementById('currentJson').value;

            let baseline, current;

            try {
                baseline = JSON.parse(baselineText);
            } catch (e) {
                alert('Error parsing baseline JSON: ' + e.message);
                return;
            }

            try {
                current = JSON.parse(currentText);
            } catch (e) {
                alert('Error parsing current JSON: ' + e.message);
                return;
            }

            const result = compareConfigs(baseline, current);
            displayResults(result.differences, result.matchCount);
        }

        // Display results
        function displayResults(differences, matchCount) {
            const resultsDiv = document.getElementById('diffResults');
            const contentDiv = document.getElementById('diffContent');
            
            // Count by type
            const counts = { missing: 0, extra: 0, changed: 0 };
            differences.forEach(d => counts[d.type]++);

            // Update stats
            document.getElementById('missingCount').textContent = counts.missing;
            document.getElementById('extraCount').textContent = counts.extra;
            document.getElementById('changedCount').textContent = counts.changed;
            document.getElementById('matchCount').textContent = matchCount;

            // Build content
            let html = '';

            if (differences.length === 0) {
                html = '<div class="diff-item diff-match"><span class="diff-type">‚úì</span><span class="diff-path">No configuration drift detected - all values match!</span></div>';
            } else {
                differences.forEach(diff => {
                    html += `<div class="diff-item diff-${diff.type}">
                        <span class="diff-type">${diff.type.toUpperCase()}</span>
                        <span class="diff-path">${diff.path}</span>
                        <span class="diff-values">`;
                    
                    if (diff.type === 'changed') {
                        html += `<span class="old-value">${formatValue(diff.baselineValue)}</span>`;
                        html += `<span class="new-value">${formatValue(diff.currentValue)}</span>`;
                    } else if (diff.type === 'missing') {
                        html += `Expected: ${formatValue(diff.baselineValue)}`;
                    } else {
                        html += `Found: ${formatValue(diff.currentValue)}`;
                    }
                    
                    html += '</span></div>';
                });
            }

            contentDiv.innerHTML = html;
            resultsDiv.style.display = 'block';
        }

        // Format value for display
        function formatValue(value) {
            if (value === null) return 'null';
            if (typeof value === 'object') {
                return JSON.stringify(value).substring(0, 50) + (JSON.stringify(value).length > 50 ? '...' : '');
            }
            return String(value);
        }

        // Reset demo
        function resetDemo() {
            loadScenario('firewall');
        }

        // Copy code
        function copyCode(button) {
            const codeBlock = button.closest('.code-block');
            const codeContent = codeBlock.querySelector('.code-content pre') || codeBlock.querySelector('.code-content');
            const text = codeContent.textContent;
            
            navigator.clipboard.writeText(text).then(() => {
                const originalText = button.textContent;
                button.textContent = 'Copied!';
                setTimeout(() => {
                    button.textContent = originalText;
                }, 2000);
            });
        }

        // Toggle solution
        function toggleSolution(exerciseId) {
            const solution = document.getElementById(`${exerciseId}-solution`);
            const isHidden = solution.style.display === 'none';
            solution.style.display = isHidden ? 'block' : 'none';
            
            // Update button text
            const btn = solution.previousElementSibling;
            btn.textContent = isHidden ? 'Hide Solution' : 'Show Solution';
        }

        // Critique section
        let selectedOption = null;

        function selectCritiqueOption(element, option) {
            document.querySelectorAll('.critique-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            element.classList.add('selected');
            selectedOption = option;
        }

        function checkCritiqueAnswer() {
            if (!selectedOption) {
                alert('Please select an answer first.');
                return;
            }

            const feedback = document.getElementById('critiqueFeedback');
            const options = document.querySelectorAll('.critique-option');

            // The correct answer is C - doesn't handle nested structures
            const correctAnswer = 'C';

            options.forEach(opt => {
                opt.classList.remove('selected', 'correct', 'incorrect');
                const optionLetter = opt.querySelector('.option-marker').textContent;
                if (optionLetter === correctAnswer) {
                    opt.classList.add('correct');
                } else if (optionLetter === selectedOption && selectedOption !== correctAnswer) {
                    opt.classList.add('incorrect');
                }
            });

            if (selectedOption === correctAnswer) {
                feedback.className = 'critique-feedback show correct';
                feedback.innerHTML = `
                    <strong>‚úì Correct!</strong><br><br>
                    The code has multiple issues, but the <strong>primary problem</strong> is that it doesn't handle nested structures. 
                    Configuration files typically have nested dictionaries and lists (like our firewall rules array), 
                    and this code would only compare top-level keys.<br><br>
                    <strong>Other issues:</strong><br>
                    ‚Ä¢ It also doesn't detect extra keys (option B is also a problem)<br>
                    ‚Ä¢ The function name could be more descriptive<br>
                    ‚Ä¢ It doesn't track the path for nested items
                `;
            } else {
                feedback.className = 'critique-feedback show incorrect';
                feedback.innerHTML = `
                    <strong>‚úó Not quite.</strong><br><br>
                    While that may be a valid concern, the <strong>primary issue</strong> is that the code doesn't handle nested structures (option C).
                    Security configurations typically have deeply nested objects and arrays, 
                    which this simple loop cannot properly compare.<br><br>
                    Try again to select the most critical flaw!
                `;
            }
        }
    </script>
</body>
</html>
